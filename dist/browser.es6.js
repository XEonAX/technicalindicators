class e{constructor(e,t,r){this.next=r,r&&(r.prev=this),this.prev=t,t&&(t.next=this),this.data=e}}class t{constructor(){this._length=0}get head(){return this._head&&this._head.data}get tail(){return this._tail&&this._tail.data}get current(){return this._current&&this._current.data}get length(){return this._length}push(t){this._tail=new e(t,this._tail),0===this._length&&(this._head=this._tail,this._current=this._head,this._next=this._head),this._length++}pop(){var e=this._tail;if(0!==this._length)return this._length--,0===this._length?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._tail=e.prev,this._tail.next=void 0,this._current===e&&(this._current=this._tail,this._next=void 0),e.data)}shift(){var e=this._head;if(0!==this._length)return this._length--,0===this._length?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._head=this._head.next,this._current===e&&(this._current=this._head,this._next=this._current.next),e.data)}unshift(t){this._head=new e(t,void 0,this._head),0===this._length&&(this._tail=this._head,this._next=this._head),this._length++}unshiftCurrent(){var e=this._current;return e===this._head||this._length<2?e&&e.data:(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.next=this._head,e.prev=void 0,this._head.prev=e,this._head=e,e.data)}removeCurrent(){var e=this._current;if(0!==this._length)return this._length--,0===this._length?(this._head=this._tail=this._current=this._next=void 0,e.data):(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):e===this._head?(this._head=e.next,this._head.prev=void 0,this._current=this._head):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.data)}resetCursor(){return this._current=this._next=this._head,this}next(){var e=this._next;if(void 0!==e)return this._next=e.next,this._current=e,e.data}}class r extends t{constructor(e,t,r,s){if(super(),this.size=e,this.maintainHigh=t,this.maintainLow=r,this.maintainSum=s,this.totalPushed=0,this.periodHigh=0,this.periodLow=1/0,this.periodSum=0,!e||"number"!=typeof e)throw"Size required and should be a number.";this._push=this.push,this.push=function(e){this.add(e),this.totalPushed++}}add(e){this.length===this.size?(this.lastShift=this.shift(),this._push(e),this.maintainHigh&&this.lastShift==this.periodHigh&&this.calculatePeriodHigh(),this.maintainLow&&this.lastShift==this.periodLow&&this.calculatePeriodLow(),this.maintainSum&&(this.periodSum=this.periodSum-this.lastShift)):this._push(e),this.maintainHigh&&this.periodHigh<=e&&(this.periodHigh=e),this.maintainLow&&this.periodLow>=e&&(this.periodLow=e),this.maintainSum&&(this.periodSum=this.periodSum+e)}*iterator(){for(this.resetCursor();this.next();)yield this.current}calculatePeriodHigh(){for(this.resetCursor(),this.next()&&(this.periodHigh=this.current);this.next();)this.periodHigh<=this.current&&(this.periodHigh=this.current)}calculatePeriodLow(){for(this.resetCursor(),this.next()&&(this.periodLow=this.current);this.next();)this.periodLow>=this.current&&(this.periodLow=this.current)}}class s{}class n{constructor(){this.open=[],this.high=[],this.low=[],this.close=[],this.volume=[],this.timestamp=[]}}let i={};function l(e,t){i[e]=t}function o(e){return i[e]}function u(e){let t=o("precision");return t?parseFloat(e.toPrecision(t)):e}class a{}class h{constructor(e){this.format=e.format||u}static reverseInputs(e){e.reversedInput&&(e.values&&e.values.reverse(),e.open&&e.open.reverse(),e.high&&e.high.reverse(),e.low&&e.low.reverse(),e.close&&e.close.reverse(),e.volume&&e.volume.reverse(),e.timestamp&&e.timestamp.reverse())}getResult(){return this.result}}class c extends h{constructor(e){super(e),this.period=e.period,this.price=e.values;this.generator=function*(e){var r,s=new t,n=0,i=1,l=yield;for(s.push(0);;)i<e?(i++,s.push(l),n+=l):(r=(n=n-s.shift()+l)/e,s.push(l)),l=yield r}(this.period),this.generator.next(),this.result=[],this.price.forEach((e=>{var t=this.generator.next(e);void 0!==t.value&&this.result.push(this.format(t.value))}))}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}function v(e){h.reverseInputs(e);var t=new c(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}c.calculate=v;class p extends h{constructor(e){super(e);var t,r=e.period,s=e.values,n=2/(r+1);this.result=[],t=new c({period:r,values:[]});this.generator=function*(){for(var e,r=yield;;)void 0!==e&&void 0!==r?(e=(r-e)*n+e,r=yield e):(r=yield,(e=t.nextValue(r))&&(r=yield e))}(),this.generator.next(),this.generator.next(),s.forEach((e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(this.format(t.value))}))}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}function d(e){h.reverseInputs(e);var t=new p(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}p.calculate=d;class g extends h{constructor(e){super(e);var r=e.period,s=e.values;this.result=[],this.generator=function*(){let e=new t,s=r*(r+1)/2;for(;;)if(e.length<r)e.push(yield);else{e.resetCursor();let t=0;for(let n=1;n<=r;n++)t+=e.next()*n/s;var n=yield t;e.shift(),e.push(n)}}(),this.generator.next(),s.forEach(((e,t)=>{var r=this.generator.next(e);null!=r.value&&this.result.push(this.format(r.value))}))}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}function w(e){h.reverseInputs(e);var t=new g(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}g.calculate=w;class f extends h{constructor(e){super(e);var t,r=e.period,s=e.values,n=1/r;this.result=[],t=new c({period:r,values:[]});this.generator=function*(){for(var e,r=yield;;)void 0!==e&&void 0!==r?(e=(r-e)*n+e,r=yield e):(r=yield,void 0!==(e=t.nextValue(r))&&(r=yield e))}(),this.generator.next(),this.generator.next(),s.forEach((e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(this.format(t.value))}))}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}function x(e){h.reverseInputs(e);var t=new f(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}f.calculate=x;class m extends h{constructor(e){super(e),this.period=e.period,this.price=e.values;this.generator=function*(e){new t;for(var r=0,s=1,n=yield,i=0;;)s<e?(s++,r+=n,i=void 0):s==e?(s++,i=r+=n):i=i-i/e+n,n=yield i}(this.period),this.generator.next(),this.result=[],this.price.forEach((e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(this.format(t.value))}))}nextValue(e){var t=this.generator.next(e).value;if(null!=t)return this.format(t)}}function I(e){h.reverseInputs(e);var t=new m(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}m.calculate=I;class y extends h{constructor(e){super(e);var t=e.SimpleMAOscillator?c:p,r=e.SimpleMASignal?c:p,s=new t({period:e.fastPeriod,values:[],format:e=>e}),n=new t({period:e.slowPeriod,values:[],format:e=>e}),i=new r({period:e.signalPeriod,values:[],format:e=>e}),l=this.format;this.result=[],this.generator=function*(){for(var t,r,o,u,a,h,c=0;;)c<e.slowPeriod?(t=yield,a=s.nextValue(t),h=n.nextValue(t),c++):(a&&h&&(r=a-h,o=i.nextValue(r)),u=r-o,t=yield{MACD:l(r),signal:o?l(o):void 0,histogram:isNaN(u)?void 0:l(u)},a=s.nextValue(t),h=n.nextValue(t))}(),this.generator.next(),e.values.forEach((e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(t.value)}))}nextValue(e){return this.generator.next(e).value}}function P(e){h.reverseInputs(e);var t=new y(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}y.calculate=P;class _ extends h{constructor(e){super(e);let t=e.values,r=e.period,s=this.format;this.generator=function*(e){var t,r,n=yield,i=1,l=0,o=n;for(n=yield;;)(r=(r=n-o)>0?r:0)>0&&(l+=r),i<e?i++:t=void 0===t?l/e:(t*(e-1)+r)/e,o=n,t=void 0!==t?s(t):void 0,n=yield t}(r),this.generator.next(),this.result=[],t.forEach((e=>{var t=this.generator.next(e);void 0!==t.value&&this.result.push(t.value)}))}nextValue(e){return this.generator.next(e).value}}function V(e){h.reverseInputs(e);var t=new _(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}_.calculate=V;class q extends h{constructor(e){super(e);let t=e.values,r=e.period,s=this.format;this.generator=function*(e){var t,r,n=yield,i=1,l=0,o=n;for(n=yield;;)(r=(r=o-n)>0?r:0)>0&&(l+=r),i<e?i++:t=void 0===t?l/e:(t*(e-1)+r)/e,o=n,t=void 0!==t?s(t):void 0,n=yield t}(r),this.generator.next(),this.result=[],t.forEach((e=>{var t=this.generator.next(e);void 0!==t.value&&this.result.push(t.value)}))}nextValue(e){return this.generator.next(e).value}}function C(e){h.reverseInputs(e);var t=new q(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}q.calculate=C;class E extends h{constructor(e){super(e);var t=e.period,r=e.values,s=new _({period:t,values:[]}),n=new q({period:t,values:[]});this.generator=function*(e){for(var t,r,i,l,o=yield;;)t=s.nextValue(o),r=n.nextValue(o),void 0!==t&&void 0!==r&&(0===r?l=100:0===t?l=0:(i=t/r,i=isNaN(i)?0:i,l=parseFloat((100-100/(1+i)).toFixed(2)))),o=yield l}(),this.generator.next(),this.result=[],r.forEach((e=>{var t=this.generator.next(e);void 0!==t.value&&this.result.push(t.value)}))}nextValue(e){return this.generator.next(e).value}}function b(e){h.reverseInputs(e);var t=new E(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}E.calculate=b;class S extends h{constructor(e){super(e);var t=e.period,s=e.values,n=new c({period:t,values:[],format:e=>e});this.result=[],this.generator=function*(){var e,s,i,l=new r(t);for(e=yield;;){if(l.push(e),s=n.nextValue(e)){let e=0;for(let t of l.iterator())e+=Math.pow(t-s,2);i=Math.sqrt(e/t)}e=yield i}}(),this.generator.next(),s.forEach((e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(this.format(t.value))}))}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return this.format(t.value)}}function M(e){h.reverseInputs(e);var t=new S(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}S.calculate=M;class B extends h{constructor(e){super(e);var t,r,s=e.period,n=e.values,i=e.stdDev,l=this.format;this.result=[],t=new c({period:s,values:[],format:e=>e}),r=new S({period:s,values:[],format:e=>e}),this.generator=function*(){var e,s,n,o;for(s=yield;;){if(n=t.nextValue(s),o=r.nextValue(s),n){let t=l(n),r=l(n+o*i),u=l(n-o*i);e={middle:t,upper:r,lower:u,pb:l((s-u)/(r-u))}}s=yield e}}(),this.generator.next(),n.forEach((e=>{var t=this.generator.next(e);null!=t.value&&this.result.push(t.value)}))}nextValue(e){return this.generator.next(e).value}}function H(e){h.reverseInputs(e);var t=new B(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}B.calculate=H;class A extends h{constructor(e){super(e);var t=e.low,r=e.high,s=this.format;if(t.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=function*(){for(var e,t,r=yield;;){if(t){let n=r.high-t.high,i=t.low-r.low;e=s(i>n&&i>0?i:0)}t=r,r=yield e}}(),this.generator.next(),t.forEach(((e,s)=>{var n=this.generator.next({high:r[s],low:t[s]});void 0!==n.value&&this.result.push(n.value)}))}static calculate(e){h.reverseInputs(e);var t=new A(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}nextValue(e){return this.generator.next(e).value}}class k extends h{constructor(e){super(e);var t=e.low,r=e.high,s=this.format;if(t.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=function*(){for(var e,t,r=yield;;){if(t){let n=r.high-t.high,i=t.low-r.low;e=s(n>i&&n>0?n:0)}t=r,r=yield e}}(),this.generator.next(),t.forEach(((e,s)=>{var n=this.generator.next({high:r[s],low:t[s]});void 0!==n.value&&this.result.push(n.value)}))}static calculate(e){h.reverseInputs(e);var t=new k(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}nextValue(e){return this.generator.next(e).value}}class z extends h{constructor(e){super(e);var t=e.low,r=e.high,s=e.close,n=this.format;if(t.length!=r.length)throw"Inputs(low,high) not of equal size";this.result=[],this.generator=function*(){for(var e,t,r=yield;;)void 0===e&&(e=r.close,r=yield t),t=Math.max(r.high-r.low,isNaN(Math.abs(r.high-e))?0:Math.abs(r.high-e),isNaN(Math.abs(r.low-e))?0:Math.abs(r.low-e)),e=r.close,null!=t&&(t=n(t)),r=yield t}(),this.generator.next(),t.forEach(((e,n)=>{var i=this.generator.next({high:r[n],low:t[n],close:s[n]});null!=i.value&&this.result.push(i.value)}))}nextValue(e){return this.generator.next(e).value}}function T(e){h.reverseInputs(e);var t=new z(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}z.calculate=T;class L extends h{constructor(e){super(e);var t=e.low,r=e.high,s=e.close,n=e.period,i=this.format,l=new k({high:[],low:[]}),o=new A({high:[],low:[]}),u=new m({period:n,values:[],format:e=>e}),a=new m({period:n,values:[],format:e=>e}),h=new m({period:n,values:[],format:e=>e}),c=new f({period:n,values:[],format:e=>e}),v=new z({low:[],high:[],close:[]});if(t.length!==r.length||r.length!==s.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){for(var e,t,r,s,n=yield;;){let i=v.nextValue(n),p=l.nextValue(n),d=o.nextValue(n);if(void 0===i){n=yield;continue}let g=h.nextValue(i),w=u.nextValue(p),f=a.nextValue(d);if(null!=g&&null!=w&&null!=f){e=100*w/g,t=100*f/g,r=Math.abs(e-t)/(e+t)*100,s=c.nextValue(r)}n=yield{adx:s,pdi:e,mdi:t}}}(),this.generator.next(),t.forEach(((e,n)=>{var l=this.generator.next({high:r[n],low:t[n],close:s[n]});null!=l.value&&null!=l.value.adx&&this.result.push({adx:i(l.value.adx),pdi:i(l.value.pdi),mdi:i(l.value.mdi)})}))}nextValue(e){let t=this.generator.next(e).value;if(null!=t&&null!=t.adx)return{adx:this.format(t.adx),pdi:this.format(t.pdi),mdi:this.format(t.mdi)}}}function D(e){h.reverseInputs(e);var t=new L(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}L.calculate=D;class N extends h{constructor(e){super(e);var t=e.low,r=e.high,s=e.close,n=e.period,i=this.format;if(t.length!==r.length||r.length!==s.length)throw"Inputs(low,high, close) not of equal size";var l=new z({low:[],high:[],close:[]}),o=new f({period:n,values:[],format:e=>e});this.result=[],this.generator=function*(){for(var e,t,r=yield;;)e=void 0===(t=l.nextValue({low:r.low,high:r.high,close:r.close}))?void 0:o.nextValue(t),r=yield e}(),this.generator.next(),t.forEach(((e,n)=>{var l=this.generator.next({high:r[n],low:t[n],close:s[n]});void 0!==l.value&&this.result.push(i(l.value))}))}nextValue(e){return this.generator.next(e).value}}function F(e){h.reverseInputs(e);var t=new N(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}N.calculate=F;class R extends h{constructor(e){super(e);var t=e.period,s=e.values;this.result=[],this.generator=function*(){let e=1;for(var s,n=new r(t),i=yield;;)n.push(i),e<t?e++:s=(i-n.lastShift)/n.lastShift*100,i=yield s}(),this.generator.next(),s.forEach((e=>{var t=this.generator.next(e);null==t.value||isNaN(t.value)||this.result.push(this.format(t.value))}))}nextValue(e){var t=this.generator.next(e);if(null!=t.value&&!isNaN(t.value))return this.format(t.value)}}function j(e){h.reverseInputs(e);var t=new R(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}R.calculate=j;class O extends h{constructor(e){super(e);let t=e.values,r=e.ROCPer1,s=e.ROCPer2,n=e.ROCPer3,i=e.ROCPer4,l=e.SMAROCPer1,o=e.SMAROCPer2,u=e.SMAROCPer3,a=e.SMAROCPer4,h=e.signalPeriod,v=new R({period:r,values:[]}),p=new R({period:s,values:[]}),d=new R({period:n,values:[]}),g=new R({period:i,values:[]}),w=new c({period:l,values:[],format:e=>e}),f=new c({period:o,values:[],format:e=>e}),x=new c({period:u,values:[],format:e=>e}),m=new c({period:a,values:[],format:e=>e}),I=new c({period:h,values:[],format:e=>e});var y=this.format;this.result=[];let P=Math.max(r+l,s+o,n+u,i+a);this.generator=function*(){let e,t,r,s,n,i,l,o=1,u=yield;for(;;){let a=v.nextValue(u),h=p.nextValue(u),c=d.nextValue(u),_=g.nextValue(u);t=void 0!==a?w.nextValue(a):void 0,r=void 0!==h?f.nextValue(h):void 0,s=void 0!==c?x.nextValue(c):void 0,n=void 0!==_?m.nextValue(_):void 0,o<P?o++:e=1*t+2*r+3*s+4*n,i=void 0!==e?I.nextValue(e):void 0,l=void 0!==e?{kst:y(e),signal:i?y(i):void 0}:void 0,u=yield l}}(),this.generator.next(),t.forEach((e=>{let t=this.generator.next(e);null!=t.value&&this.result.push(t.value)}))}nextValue(e){let t=this.generator.next(e);if(null!=t.value)return t.value}}function U(e){h.reverseInputs(e);var t=new O(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}O.calculate=U;class G extends h{constructor(e){super(e);let t=e.high||[],r=e.low||[];this.result=[],this.generator=function*(e,t){let r,s,n,i,l=!0,o=e,u=yield;for(;;)r?(n+=o*(s-n),l?(n=Math.min(n,i.low,u.low),r.high>s&&(s=r.high,o=Math.min(o+e,t))):(n=Math.max(n,i.high,u.high),r.low<s&&(s=r.low,o=Math.min(o+e,t))),(l&&r.low<n||!l&&r.high>n)&&(o=e,n=s,l=!l,s=l?r.high:r.low)):(n=u.low,s=u.high),i=u,r&&(u=r),r=yield n}(e.step,e.max),this.generator.next(),r.forEach(((e,s)=>{var n=this.generator.next({high:t[s],low:r[s]});void 0!==n.value&&this.result.push(n.value)}))}nextValue(e){let t=this.generator.next(e);if(void 0!==t.value)return t.value}}function W(e){h.reverseInputs(e);var t=new G(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}G.calculate=W;class J extends h{constructor(e){super(e);let t=e.low,s=e.high,n=e.close,i=e.period,l=e.signalPeriod,o=this.format;if(t.length!==s.length||s.length!==n.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){let e,t,s=1,n=new r(i,!0,!1),u=new r(i,!1,!0),a=new c({period:l,values:[],format:e=>e});for(var h=yield;;){if(n.push(h.high),u.push(h.low),s<i){s++,h=yield;continue}let r=u.periodLow;e=(h.close-r)/(n.periodHigh-r)*100,e=isNaN(e)?0:e,t=a.nextValue(e),h=yield{k:o(e),d:void 0!==t?o(t):void 0}}}(),this.generator.next(),t.forEach(((e,r)=>{var i=this.generator.next({high:s[r],low:t[r],close:n[r]});void 0!==i.value&&this.result.push(i.value)}))}nextValue(e){let t=this.generator.next(e);if(void 0!==t.value)return t.value}}function K(e){h.reverseInputs(e);var t=new J(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}J.calculate=K;class Q extends h{constructor(e){super(e);let t=e.low,s=e.high,n=e.close,i=e.period,l=this.format;if(t.length!==s.length||s.length!==n.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){let e,t,s=1,n=new r(i,!0,!1),o=new r(i,!1,!0);var u=yield;let a;for(;;)n.push(u.high),o.push(u.low),s<i?(s++,u=yield):(e=o.periodLow,t=n.periodHigh,a=l((t-u.close)/(t-e)*-100),u=yield a)}(),this.generator.next(),t.forEach(((e,r)=>{var i=this.generator.next({high:s[r],low:t[r],close:n[r]});void 0!==i.value&&this.result.push(i.value)}))}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return this.format(t.value)}}function X(e){h.reverseInputs(e);var t=new Q(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}Q.calculate=X;class Y extends h{constructor(e){super(e);var t=e.high,r=e.low,s=e.close,n=e.volume;if(r.length!==t.length||t.length!==s.length||t.length!==n.length)throw"Inputs(low,high, close, volumes) not of equal size";this.result=[],this.generator=function*(){var e,t=0;for(e=yield;;){let r=(e.close-e.low-(e.high-e.close))/(e.high-e.low);r=isNaN(r)?1:r,t+=r*e.volume,e=yield Math.round(t)}}(),this.generator.next(),t.forEach(((e,t)=>{var i={high:e,low:r[t],close:s[t],volume:n[t]},l=this.generator.next(i);null!=l.value&&this.result.push(l.value)}))}nextValue(e){return this.generator.next(e).value}}function Z(e){h.reverseInputs(e);var t=new Y(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}Y.calculate=Z;class $ extends h{constructor(e){super(e);var t=e.close,r=e.volume;this.result=[],this.generator=function*(){var e,t,r=0;for((e=yield).close&&"number"==typeof e.close&&(t=e.close,e=yield);;)t<e.close?r+=e.volume:e.close<t&&(r-=e.volume),t=e.close,e=yield r}(),this.generator.next(),t.forEach(((e,s)=>{let n={close:t[s],volume:r[s]},i=this.generator.next(n);null!=i.value&&this.result.push(i.value)}))}nextValue(e){return this.generator.next(e).value}}function ee(e){h.reverseInputs(e);var t=new $(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}$.calculate=ee;class te extends h{constructor(e){super(e);let t=e.values,r=e.period,s=this.format,n=new p({period:r,values:[],format:e=>e}),i=new p({period:r,values:[],format:e=>e}),l=new p({period:r,values:[],format:e=>e}),o=new R({period:1,values:[],format:e=>e});this.result=[],this.generator=function*(){let e=yield;for(;;){let t=n.nextValue(e),r=t?i.nextValue(t):void 0,u=r?l.nextValue(r):void 0,a=u?o.nextValue(u):void 0;e=yield a?s(a):void 0}}(),this.generator.next(),t.forEach((e=>{let t=this.generator.next(e);void 0!==t.value&&this.result.push(t.value)}))}nextValue(e){let t=this.generator.next(e);if(void 0!==t.value)return t.value}}function re(e){h.reverseInputs(e);var t=new te(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}te.calculate=re;class se extends h{constructor(e){super(e);var t=e.close,r=e.volume,s=e.period||1;if(r.length!==t.length)throw"Inputs(volume, close) not of equal size";let n=new p({values:[],period:s});this.result=[],this.generator=function*(){var e=yield,t=yield;let r;for(;;)r=(t.close-e.close)*t.volume,e=t,t=yield n.nextValue(r)}(),this.generator.next(),r.forEach(((e,s)=>{var n=this.generator.next({close:t[s],volume:r[s]});null!=n.value&&this.result.push(n.value)}))}nextValue(e){let t=this.generator.next(e).value;if(null!=t)return t}}function ne(e){h.reverseInputs(e);var t=new se(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}se.calculate=ne;class ie extends h{constructor(e){super(e);var t=e.low,s=e.high,n=e.close,i=e.period;this.format;var l=new r(i),o=new c({period:i,values:[],format:e=>e});if(t.length!==s.length||s.length!==n.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){for(var e=yield;;){let t=(e.high+e.low+e.close)/3;l.push(t);let r,s=o.nextValue(t),n=null,u=0;if(null!=s){for(let e of l.iterator())u+=Math.abs(e-s);n=u/i,r=(t-s)/(.015*n)}e=yield r}}(),this.generator.next(),t.forEach(((e,r)=>{var i=this.generator.next({high:s[r],low:t[r],close:n[r]});null!=i.value&&this.result.push(i.value)}))}nextValue(e){let t=this.generator.next(e).value;if(null!=t)return t}}function le(e){h.reverseInputs(e);var t=new ie(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}ie.calculate=le;class oe extends h{constructor(e){super(e);var t=e.high,r=e.low,s=e.fastPeriod,n=e.slowPeriod,i=new c({values:[],period:n}),l=new c({values:[],period:s});this.result=[],this.generator=function*(){var e,t,r,s,n;for(t=yield;;)r=(t.high+t.low)/2,s=i.nextValue(r),n=l.nextValue(r),void 0!==s&&void 0!==n&&(e=n-s),t=yield e}(),this.generator.next(),t.forEach(((e,t)=>{var s={high:e,low:r[t]},n=this.generator.next(s);null!=n.value&&this.result.push(this.format(n.value))}))}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return this.format(t.value)}}function ue(e){h.reverseInputs(e);var t=new oe(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}oe.calculate=ue;class ae extends h{constructor(e){super(e);var t=e.low,r=e.high,s=e.close,n=e.volume;if(this.format,t.length!==r.length||r.length!==s.length)throw"Inputs(low,high, close) not of equal size";this.result=[],this.generator=function*(){let e=yield,t=0,r=0;for(;;){let s=(e.high+e.low+e.close)/3;t+=e.volume*s,r+=e.volume,e=yield t/r}}(),this.generator.next(),t.forEach(((e,i)=>{let l=this.generator.next({high:r[i],low:t[i],close:s[i],volume:n[i]});null!=l.value&&this.result.push(l.value)}))}nextValue(e){let t=this.generator.next(e).value;if(null!=t)return t}}function he(e){h.reverseInputs(e);var t=new ae(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}ae.calculate=he;class ce extends h{constructor(e){super(e);var t=e.high,r=e.low,s=e.close,n=e.open,i=e.volume,l=e.noOfBars;if(r.length!==t.length||t.length!==s.length||t.length!==i.length)throw"Inputs(low,high, close, volumes) not of equal size";this.result=[];var o,u,a,h,c=Math.max(...t,...r,...s,...n),v=Math.min(...t,...r,...s,...n),p=(c-v)/l,d=v;for(let e=0;e<l;e++){let e=d,l=e+p;d=l;let c=0,v=0,g=0;for(let p=0;p<t.length;p++){let d=r[p],w=t[p],f=n[p],x=s[p],m=i[p];u=l,h=w,((o=e)<=(a=d)&&u>=a||a<=o&&h>=o)&&(g+=m,f>x?v+=m:c+=m)}this.result.push({rangeStart:e,rangeEnd:l,bullishVolume:c,bearishVolume:v,totalVolume:g})}}nextValue(e){throw"Next value not supported for volume profile"}}function ve(e){h.reverseInputs(e);var t=new ce(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}ce.calculate=ve;class pe extends h{constructor(e){super(e),this.result=[],this.generator=function*(){let e=yield;for(;;)e=yield(e.high+e.low+e.close)/3}(),this.generator.next(),e.low.forEach(((t,r)=>{var s=this.generator.next({high:e.high[r],low:e.low[r],close:e.close[r]});this.result.push(s.value)}))}nextValue(e){return this.generator.next(e).value}}pe.calculate=function(e){h.reverseInputs(e);var t=new pe(e).result;e.reversedInput&&t.reverse();return h.reverseInputs(e),t};class de extends h{constructor(e){super(e);var t=e.high,s=e.low,n=e.close,i=e.volume,l=e.period,o=new pe({low:[],high:[],close:[]}),u=new r(l,!1,!1,!0),a=new r(l,!1,!1,!0);if(s.length!==t.length||t.length!==n.length||t.length!==i.length)throw"Inputs(low,high, close, volumes) not of equal size";this.result=[],this.generator=function*(){var e,t,r,s,n=0;let i=null,h=null;for((t=yield).close,t=yield;;){var{high:c,low:v,close:p,volume:d}=t,g=0,w=0;i=o.nextValue({high:c,low:v,close:p}),n=i*d,null!=i&&null!=h&&(i>h?g=n:w=n,u.push(g),a.push(w),r=u.periodSum,s=a.periodSum,u.totalPushed>=l&&u.totalPushed>=l&&(e=100-100/(1+r/s))),h=i,t=yield e}}(),this.generator.next(),t.forEach(((e,t)=>{var r={high:e,low:s[t],close:n[t],volume:i[t]},l=this.generator.next(r);null!=l.value&&this.result.push(parseFloat(l.value.toFixed(2)))}))}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return parseFloat(t.value.toFixed(2))}}function ge(e){h.reverseInputs(e);var t=new de(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}de.calculate=ge;class we extends h{constructor(e){super(e);let t=e.values,r=e.rsiPeriod,s=e.stochasticPeriod,n=e.kPeriod,i=e.dPeriod;this.format,this.result=[],this.generator=function*(){let e,t,l,o,u=new E({period:r,values:[]}),a=new J({period:s,high:[],low:[],close:[],signalPeriod:n}),h=new c({period:i,values:[],format:e=>e});for(var v=yield;;){if(e=u.nextValue(v),void 0!==e){var p={high:e,low:e,close:e};t=a.nextValue(p),void 0!==t&&void 0!==t.d&&(l=h.nextValue(t.d),void 0!==l&&(o={stochRSI:t.k,k:t.d,d:l}))}v=yield o}}(),this.generator.next(),t.forEach(((e,t)=>{var r=this.generator.next(e);void 0!==r.value&&this.result.push(r.value)}))}nextValue(e){let t=this.generator.next(e);if(void 0!==t.value)return t.value}}function fe(e){h.reverseInputs(e);var t=new we(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}we.calculate=fe;class xe extends h{constructor(e){super(e);var t=e.values,s=e.period;this.result=[];var n=new r(s,!0,!1,!1);this.generator=function*(){var e,t;for(e=yield;;)n.push(e),n.totalPushed>=s&&(t=n.periodHigh),e=yield t}(),this.generator.next(),t.forEach(((e,t)=>{var r=this.generator.next(e);null!=r.value&&this.result.push(r.value)}))}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}function me(e){h.reverseInputs(e);var t=new xe(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}xe.calculate=me;class Ie extends h{constructor(e){super(e);var t=e.values,s=e.period;this.result=[];var n=new r(s,!1,!0,!1);this.generator=function*(){var e,t;for(e=yield;;)n.push(e),n.totalPushed>=s&&(t=n.periodLow),e=yield t}(),this.generator.next(),t.forEach(((e,t)=>{var r=this.generator.next(e);null!=r.value&&this.result.push(r.value)}))}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}function ye(e){h.reverseInputs(e);var t=new Ie(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}Ie.calculate=ye;class Pe extends h{constructor(e){super(e);var t=e.values,s=e.period;this.result=[];var n=new r(s,!1,!1,!0);this.generator=function*(){var e,t;for(e=yield;;)n.push(e),n.totalPushed>=s&&(t=n.periodSum),e=yield t}(),this.generator.next(),t.forEach(((e,t)=>{var r=this.generator.next(e);null!=r.value&&this.result.push(r.value)}))}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}function _e(e){h.reverseInputs(e);var t=new Pe(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}Pe.calculate=_e;class Ve extends h{constructor(e){super(e),this.format;let t=e.useATR,r=e.brickSize||0;if(t){let t=F(Object.assign({},e));r=t[t.length-1]}if(this.result=new n,0===r)return void console.error("Not enough data to calculate brickSize for renko when using ATR");let s=0,i=0,l=1/0,o=0,u=0;this.generator=function*(){let e=yield;for(;;){if(0===s){s=e.close,i=e.high,l=e.low,o=e.close,u=e.volume,e.timestamp,e=yield;continue}let t=Math.abs(e.close-o),n=Math.abs(e.close-s);if(t>=r&&n>=r){let a=t>n?s:o,h={open:a,high:i>e.high?i:e.high,low:l<e.low?l:e.low,close:a>e.close?a-r:a+r,volume:u+e.volume,timestamp:e.timestamp};s=h.open,i=h.close,l=h.close,o=h.close,u=0,e=yield h}else i=i>e.high?i:e.high,l=l<e.low?l:e.low,u+=e.volume,e.timestamp,e=yield}}(),this.generator.next(),e.low.forEach(((t,r)=>{var s=this.generator.next({open:e.open[r],high:e.high[r],low:e.low[r],close:e.close[r],volume:e.volume[r],timestamp:e.timestamp[r]});s.value&&(this.result.open.push(s.value.open),this.result.high.push(s.value.high),this.result.low.push(s.value.low),this.result.close.push(s.value.close),this.result.volume.push(s.value.volume),this.result.timestamp.push(s.value.timestamp))}))}nextValue(e){return console.error("Cannot calculate next value on Renko, Every value has to be recomputed for every change, use calcualte method"),null}}function qe(e){h.reverseInputs(e);var t=new Ve(e).result;return e.reversedInput&&(t.open.reverse(),t.high.reverse(),t.low.reverse(),t.close.reverse(),t.volume.reverse(),t.timestamp.reverse()),h.reverseInputs(e),t}Ve.calculate=qe;class Ce extends h{constructor(e){super(e),this.format,this.result=new n;let t=null,r=0,s=1/0,i=0;this.generator=function*(){let e=yield,n=null;for(;;){if(null===t)t=(e.close+e.open)/2,r=e.high,s=e.low,i=(e.close+e.open+e.high+e.low)/4,e.volume,e.timestamp,n={open:t,high:r,low:s,close:i,volume:e.volume||0,timestamp:e.timestamp||0};else{let l=(e.close+e.open+e.high+e.low)/4,o=(t+i)/2,u=Math.max(o,l,e.high),a=Math.min(e.low,o,l);n={close:l,open:o,high:u,low:a,volume:e.volume||0,timestamp:e.timestamp||0},i=l,t=o,r=u,s=a}e=yield n}}(),this.generator.next(),e.low.forEach(((t,r)=>{var s=this.generator.next({open:e.open[r],high:e.high[r],low:e.low[r],close:e.close[r],volume:e.volume?e.volume[r]:e.volume,timestamp:e.timestamp?e.timestamp[r]:e.timestamp});s.value&&(this.result.open.push(s.value.open),this.result.high.push(s.value.high),this.result.low.push(s.value.low),this.result.close.push(s.value.close),this.result.volume.push(s.value.volume),this.result.timestamp.push(s.value.timestamp))}))}nextValue(e){return this.generator.next(e).value}}function Ee(e){h.reverseInputs(e);var t=new Ce(e).result;return e.reversedInput&&(t.open.reverse(),t.high.reverse(),t.low.reverse(),t.close.reverse(),t.volume.reverse(),t.timestamp.reverse()),h.reverseInputs(e),t}Ce.calculate=Ee;class be{constructor(){}approximateEqual(e,t){return 1*parseFloat(Math.abs(e-t).toPrecision(4))<=1*parseFloat((.001*e).toPrecision(4))}logic(e){throw"this has to be implemented"}getAllPatternIndex(e){if(e.close.length<this.requiredCount)return console.warn("Data count less than data required for the strategy ",this.name),[];e.reversedInput&&(e.open.reverse(),e.high.reverse(),e.low.reverse(),e.close.reverse());let t=this.logic;return this._generateDataForCandleStick(e).map(((e,r)=>t.call(this,e)?r:void 0)).filter((e=>e))}hasPattern(e){if(e.close.length<this.requiredCount)return console.warn("Data count less than data required for the strategy ",this.name),!1;return e.reversedInput&&(e.open.reverse(),e.high.reverse(),e.low.reverse(),e.close.reverse()),this.logic.call(this,this._getLastDataForCandleStick(e))}_getLastDataForCandleStick(e){let t=this.requiredCount;if(e.close.length===t)return e;{let r={open:[],high:[],low:[],close:[]},s=0,n=e.close.length-t;for(;s<t;)r.open.push(e.open[n+s]),r.high.push(e.high[n+s]),r.low.push(e.low[n+s]),r.close.push(e.close[n+s]),s++;return r}}_generateDataForCandleStick(e){let t=this.requiredCount;return e.close.map((function(r,s){let n=0,i={open:[],high:[],low:[],close:[]};for(;n<t;)i.open.push(e.open[s+n]),i.high.push(e.high[s+n]),i.low.push(e.low[s+n]),i.close.push(e.close[s+n]),n++;return i})).filter(((r,s)=>s<=e.close.length-t))}}class Se extends be{constructor(){super(),this.name="MorningStar",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0];e.high[0];let s=e.low[0];e.open[1];let n=e.close[1],i=e.high[1],l=e.low[1],o=e.open[2],u=e.close[2];return e.high[2],e.low[2],r<t&&(s>l&&s>i)&&(i<s&&l<s&&o>i&&n<o)&&o<u&&u>(t+r)/2}}function Me(e){return(new Se).hasPattern(e)}class Be extends be{constructor(){super(),this.name="BullishEngulfingPattern",this.requiredCount=2}logic(e){let t=e.open[0],r=e.close[0];e.high[0],e.low[0];let s=e.open[1],n=e.close[1];return e.high[1],e.low[1],r<t&&t>s&&r>s&&t<n}}function He(e){return(new Be).hasPattern(e)}class Ae extends be{constructor(){super(),this.requiredCount=2,this.name="BullishHarami"}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0];e.low[0];let n=e.open[1],i=e.close[1],l=e.high[1],o=e.low[1];return t>n&&r<n&&r<i&&t>o&&s>l}}function ke(e){return(new Ae).hasPattern(e)}class ze extends be{constructor(){super(),this.requiredCount=2,this.name="BullishHaramiCross"}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0];e.low[0];let n=e.open[1],i=e.close[1],l=e.high[1],o=e.low[1],u=t>n&&r<n&&r<i&&t>o&&s>l,a=this.approximateEqual(n,i);return u&&a}}function Te(e){return(new ze).hasPattern(e)}class Le extends be{constructor(){super(),this.name="Doji",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=e.low[0],i=this.approximateEqual(t,r),l=i&&this.approximateEqual(t,s),o=i&&this.approximateEqual(r,n);return i&&l==o}}function De(e){return(new Le).hasPattern(e)}class Ne extends be{constructor(){super(),this.name="MorningDojiStar",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0];e.high[0];let s=e.low[0],n=e.open[1],i=e.close[1],l=e.high[1],o=e.low[1],u=e.open[2],a=e.close[2];e.high[2],e.low[2];let h=(t+r)/2,c=r<t,v=(new Le).hasPattern({open:[n],close:[i],high:[l],low:[o]});return c&&v&&u<a&&(l<s&&o<s&&u>l&&i<u)&&a>h}}function Fe(e){return(new Ne).hasPattern(e)}class Re extends be{constructor(){super(),this.requiredCount=3,this.name="DownsideTasukiGap"}logic(e){let t=e.open[0],r=e.close[0];e.high[0];let s=e.low[0],n=e.open[1],i=e.close[1],l=e.high[1];e.low[1];let o=e.open[2],u=e.close[2];return e.high[2],e.low[2],r<t&&i<n&&u>o&&l<s&&(n>o&&i<o&&u>n&&u<r)}}function je(e){return(new Re).hasPattern(e)}class Oe extends be{constructor(){super(),this.name="BullishMarubozu",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=e.low[0];return this.approximateEqual(r,s)&&this.approximateEqual(n,t)&&t<r&&t<s}}function Ue(e){return(new Oe).hasPattern(e)}class Ge extends be{constructor(){super(),this.requiredCount=2,this.name="PiercingLine"}logic(e){let t=e.open[0],r=e.close[0];e.high[0];let s=e.low[0],n=e.open[1],i=e.close[1];return e.high[1],e.low[1]<s&&r<t&&(s>n&&i>(t+r)/2)&&i>n}}function We(e){return(new Ge).hasPattern(e)}class Je extends be{constructor(){super(),this.name="ThreeWhiteSoldiers",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0];e.low[0];let n=e.open[1],i=e.close[1],l=e.high[1];e.low[1];let o=e.open[2],u=e.close[2],a=e.high[2];return e.low[2],l>s&&a>l&&(t<r&&n<i&&o<u)&&(r>n&&n<s&&l>o&&o<i)}}function Ke(e){return(new Je).hasPattern(e)}class Qe extends be{constructor(){super(),this.name="BullishHammerStick",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=e.low[0],i=r>t;return i=i&&this.approximateEqual(r,s),i=i&&r-t<=2*(t-n),i}}function Xe(e){return(new Qe).hasPattern(e)}class Ye extends be{constructor(){super(),this.name="BullishInvertedHammerStick",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=e.low[0],i=r>t;return i=i&&this.approximateEqual(t,n),i=i&&r-t<=2*(s-r),i}}function Ze(e){return(new Ye).hasPattern(e)}class $e extends be{constructor(){super(),this.name="BearishHammerStick",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=e.low[0],i=t>r;return i=i&&this.approximateEqual(t,s),i=i&&t-r<=2*(r-n),i}}function et(e){return(new $e).hasPattern(e)}class tt extends be{constructor(){super(),this.name="BearishInvertedHammerStick",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=e.low[0],i=t>r;return i=i&&this.approximateEqual(r,n),i=i&&t-r<=2*(s-t),i}}function rt(e){return(new tt).hasPattern(e)}class st extends be{constructor(){super(),this.name="HammerPattern",this.requiredCount=5}logic(e){let t=this.downwardTrend(e);return t=t&&this.includesHammer(e),t=t&&this.hasConfirmation(e),t}downwardTrend(e,t=!0){let r=t?3:4,s=V({values:e.close.slice(0,r),period:r-1});return C({values:e.close.slice(0,r),period:r-1})>s}includesHammer(e,t=!0){let r=t?3:4,s=t?4:void 0,n={open:e.open.slice(r,s),close:e.close.slice(r,s),low:e.low.slice(r,s),high:e.high.slice(r,s)},i=et(n);return i=i||rt(n),i=i||Xe(n),i=i||Ze(n),i}hasConfirmation(e){e.open[3];let t=e.close[3],r=(e.low[3],e.high[3],e.open[4]),s=e.close[4];e.low[4],e.high[4];return r<s&&t<s}}function nt(e){return(new st).hasPattern(e)}class it extends st{constructor(){super(),this.name="HammerPatternUnconfirmed"}logic(e){let t=this.downwardTrend(e,!1);return t=t&&this.includesHammer(e,!1),t}}function lt(e){return(new it).hasPattern(e)}class ot extends be{constructor(){super(),this.name="TweezerBottom",this.requiredCount=5}logic(e){return this.downwardTrend(e)&&e.low[3]==e.low[4]}downwardTrend(e){let t=V({values:e.close.slice(0,3),period:2});return C({values:e.close.slice(0,3),period:2})>t}}function ut(e){return(new ot).hasPattern(e)}let at=[new Be,new Re,new Ae,new ze,new Ne,new Se,new Oe,new Ge,new Je,new Qe,new Ye,new st,new it,new ot];class ht extends be{constructor(){super(),this.name="Bullish Candlesticks"}hasPattern(e){return at.reduce((function(t,r){let s=r.hasPattern(e);return t||s}),!1)}}function ct(e){return(new ht).hasPattern(e)}class vt extends be{constructor(){super(),this.name="BearishEngulfingPattern",this.requiredCount=2}logic(e){let t=e.open[0],r=e.close[0];e.high[0],e.low[0];let s=e.open[1],n=e.close[1];return e.high[1],e.low[1],r>t&&t<s&&r<s&&t>n}}function pt(e){return(new vt).hasPattern(e)}class dt extends be{constructor(){super(),this.requiredCount=2,this.name="BearishHarami"}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0];e.low[0];let n=e.open[1],i=e.close[1],l=e.high[1],o=e.low[1];return t<n&&r>n&&r>i&&t<o&&s>l}}function gt(e){return(new dt).hasPattern(e)}class wt extends be{constructor(){super(),this.requiredCount=2,this.name="BearishHaramiCross"}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0];e.low[0];let n=e.open[1],i=e.close[1],l=e.high[1],o=e.low[1],u=t<n&&r>n&&r>i&&t<o&&s>l,a=this.approximateEqual(n,i);return u&&a}}function ft(e){return(new wt).hasPattern(e)}class xt extends be{constructor(){super(),this.name="EveningDojiStar",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0];e.low[0];let n=e.open[1],i=e.close[1],l=e.high[1],o=e.low[1],u=e.open[2],a=e.close[2];e.high[2],e.low[2];let h=(t+r)/2,c=r>t,v=(new Le).hasPattern({open:[n],close:[i],high:[l],low:[o]});return c&&v&&(l>s&&o>s&&u<o&&i>u)&&u>a&&a<h}}function mt(e){return(new xt).hasPattern(e)}class It extends be{constructor(){super(),this.name="EveningStar",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0];e.low[0],e.open[1];let n=e.close[1],i=e.high[1],l=e.low[1],o=e.open[2],u=e.close[2];return e.high[2],e.low[2],r>t&&(s<l&&s<i)&&(i>s&&l>s&&o<l&&n>o)&&o>u&&u<(t+r)/2}}function yt(e){return(new It).hasPattern(e)}class Pt extends be{constructor(){super(),this.name="BearishMarubozu",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=e.low[0];return this.approximateEqual(t,s)&&this.approximateEqual(n,r)&&t>r&&t>n}}function _t(e){return(new Pt).hasPattern(e)}class Vt extends be{constructor(){super(),this.name="ThreeBlackCrows",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0];e.high[0];let s=e.low[0],n=e.open[1],i=e.close[1];e.high[1];let l=e.low[1],o=e.open[2],u=e.close[2];e.high[2];let a=e.low[2];return s>l&&l>a&&(t>r&&n>i&&o>u)&&(t>n&&n>r&&n>o&&o>i)}}function qt(e){return(new Vt).hasPattern(e)}class Ct extends be{constructor(){super(),this.name="HangingMan",this.requiredCount=5}logic(e){let t=this.upwardTrend(e);return t=t&&this.includesHammer(e),t=t&&this.hasConfirmation(e),t}upwardTrend(e,t=!0){let r=t?3:4;return V({values:e.close.slice(0,r),period:r-1})>C({values:e.close.slice(0,r),period:r-1})}includesHammer(e,t=!0){let r=t?3:4,s=t?4:void 0,n={open:e.open.slice(r,s),close:e.close.slice(r,s),low:e.low.slice(r,s),high:e.high.slice(r,s)},i=et(n);return i=i||Xe(n),i}hasConfirmation(e){e.open[3];let t=e.close[3],r=(e.low[3],e.high[3],e.open[4]),s=e.close[4];e.low[4],e.high[4];return r>s&&t>s}}function Et(e){return(new Ct).hasPattern(e)}class bt extends Ct{constructor(){super(),this.name="HangingManUnconfirmed"}logic(e){let t=this.upwardTrend(e,!1);return t=t&&this.includesHammer(e,!1),t}}function St(e){return(new bt).hasPattern(e)}class Mt extends be{constructor(){super(),this.name="ShootingStar",this.requiredCount=5}logic(e){let t=this.upwardTrend(e);return t=t&&this.includesHammer(e),t=t&&this.hasConfirmation(e),t}upwardTrend(e,t=!0){let r=t?3:4;return V({values:e.close.slice(0,r),period:r-1})>C({values:e.close.slice(0,r),period:r-1})}includesHammer(e,t=!0){let r=t?3:4,s=t?4:void 0,n={open:e.open.slice(r,s),close:e.close.slice(r,s),low:e.low.slice(r,s),high:e.high.slice(r,s)},i=rt(n);return i=i||Ze(n),i}hasConfirmation(e){e.open[3];let t=e.close[3],r=(e.low[3],e.high[3],e.open[4]),s=e.close[4];e.low[4],e.high[4];return r>s&&t>s}}function Bt(e){return(new Mt).hasPattern(e)}class Ht extends Mt{constructor(){super(),this.name="ShootingStarUnconfirmed"}logic(e){let t=this.upwardTrend(e,!1);return t=t&&this.includesHammer(e,!1),t}}function At(e){return(new Ht).hasPattern(e)}class kt extends be{constructor(){super(),this.name="TweezerTop",this.requiredCount=5}logic(e){return this.upwardTrend(e)&&e.high[3]==e.high[4]}upwardTrend(e){return V({values:e.close.slice(0,3),period:2})>C({values:e.close.slice(0,3),period:2})}}function zt(e){return(new kt).hasPattern(e)}let Tt=[new vt,new dt,new wt,new xt,new It,new Pt,new Vt,new $e,new tt,new Ct,new bt,new Mt,new Ht,new kt];class Lt extends be{constructor(){super(),this.name="Bearish Candlesticks"}hasPattern(e){return Tt.reduce((function(t,r){return t||r.hasPattern(e)}),!1)}}function Dt(e){return(new Lt).hasPattern(e)}class Nt extends be{constructor(){super(),this.name="AbandonedBaby",this.requiredCount=3}logic(e){let t=e.open[0],r=e.close[0];e.high[0];let s=e.low[0],n=e.open[1],i=e.close[1],l=e.high[1],o=e.low[1],u=e.open[2],a=e.close[2],h=e.high[2],c=e.low[2],v=r<t,p=(new Le).hasPattern({open:[n],close:[i],high:[l],low:[o]});return v&&p&&(l<s&&c>l&&a>u)&&h<t}}function Ft(e){return(new Nt).hasPattern(e)}class Rt extends be{constructor(){super(),this.name="DarkCloudCover",this.requiredCount=2}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0];e.low[0];let n=e.open[1],i=e.close[1];return e.high[1],e.low[1],r>t&&i<n&&(n>s&&i<(r+t)/2&&i>t)}}function jt(e){return(new Rt).hasPattern(e)}class Ot extends be{constructor(){super(),this.requiredCount=1,this.name="DragonFlyDoji"}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=e.low[0],i=this.approximateEqual(t,r),l=i&&this.approximateEqual(t,s),o=i&&this.approximateEqual(r,n);return i&&l&&!o}}function Ut(e){return(new Ot).hasPattern(e)}class Gt extends be{constructor(){super(),this.requiredCount=1,this.name="GraveStoneDoji"}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=e.low[0],i=this.approximateEqual(t,r),l=i&&this.approximateEqual(t,s),o=i&&this.approximateEqual(r,n);return i&&o&&!l}}function Wt(e){return(new Gt).hasPattern(e)}class Jt extends be{constructor(){super(),this.name="BullishSpinningTop",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=e.low[0],i=Math.abs(r-t),l=Math.abs(s-r),o=Math.abs(t-n);return i<l&&i<o}}function Kt(e){return(new Jt).hasPattern(e)}class Qt extends be{constructor(){super(),this.name="BearishSpinningTop",this.requiredCount=1}logic(e){let t=e.open[0],r=e.close[0],s=e.high[0],n=e.low[0],i=Math.abs(r-t),l=Math.abs(s-t),o=Math.abs(s-n);return i<l&&i<o}}function Xt(e){return(new Qt).hasPattern(e)}class Yt extends be{constructor(){super(),this.name="BullishFractal",this.requiredCount=5}logic(e){let t=e.open[2],r=e.close[2],s=e.high[2],n=e.low[2],i=t>r;return i=i&&this.approximateEqual(t,s),i=i&&n<e.low[0],i=i&&n<e.low[1],i=i&&n<e.low[3],i}}function Zt(e){return(new Yt).hasPattern(e)}class $t extends be{constructor(){super(),this.name="BearishFractal",this.requiredCount=5}logic(e){let t=e.open[2],r=e.close[2],s=e.high[2];e.low[2];let n=t>r;return n=n&&this.approximateEqual(t,s),n=n&&s>e.high[0],n=n&&s>e.high[1],n=n&&s>e.high[3],n}}function er(e){return(new $t).hasPattern(e)}function tr(e,t){let r,s=[0,23.6,38.2,50,61.8,78.6,100,127.2,161.8,261.8,423.6];return r=e<t?s.map((function(r){let s=t-Math.abs(e-t)*r/100;return s>0?s:0})):s.map((function(r){let s=t+Math.abs(e-t)*r/100;return s>0?s:0})),r}class rr extends h{constructor(e){super(e),this.result=[];var t=Object.assign({},{conversionPeriod:9,basePeriod:26,spanPeriod:52,displacement:26},e),s=new r(2*t.conversionPeriod,!0,!0,!1),n=new r(2*t.basePeriod,!0,!0,!1),i=new r(2*t.spanPeriod,!0,!0,!1);this.generator=function*(){let e,r,l=Math.max(t.conversionPeriod,t.basePeriod,t.spanPeriod,t.displacement),o=1;for(r=yield;;){if(s.push(r.high),s.push(r.low),n.push(r.high),n.push(r.low),i.push(r.high),i.push(r.low),o<l)o++;else{let t=(s.periodHigh+s.periodLow)/2,r=(n.periodHigh+n.periodLow)/2;e={conversion:t,base:r,spanA:(t+r)/2,spanB:(i.periodHigh+i.periodLow)/2}}r=yield e}}(),this.generator.next(),e.low.forEach(((t,r)=>{var s=this.generator.next({high:e.high[r],low:e.low[r]});s.value&&this.result.push(s.value)}))}nextValue(e){return this.generator.next(e).value}}function sr(e){h.reverseInputs(e);var t=new rr(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}rr.calculate=sr;class nr extends a{constructor(){super(...arguments),this.maPeriod=20,this.atrPeriod=10,this.useSMA=!1,this.multiplier=1}}class ir extends a{}class lr extends h{constructor(e){super(e);var t,r=new(e.useSMA?c:p)({period:e.maPeriod,values:[],format:e=>e}),s=new N({period:e.atrPeriod,high:[],low:[],close:[],format:e=>e});this.result=[],this.generator=function*(){var n;for(t=yield;;){var{close:i}=t,l=r.nextValue(i),o=s.nextValue(t);null!=l&&null!=o&&(n={middle:l,upper:l+e.multiplier*o,lower:l-e.multiplier*o}),t=yield n}}(),this.generator.next(),e.high.forEach(((t,r)=>{var s={high:t,low:e.low[r],close:e.close[r]},n=this.generator.next(s);null!=n.value&&this.result.push(n.value)}))}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}function or(e){h.reverseInputs(e);var t=new lr(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}lr.calculate=or;class ur extends a{constructor(){super(...arguments),this.period=22,this.multiplier=3}}class ar extends a{}class hr extends h{constructor(e){super(e);var t=e.high,s=e.low,n=e.close;this.result=[];var i=new N({period:e.period,high:[],low:[],close:[],format:e=>e}),l=new r(2*e.period,!0,!0,!1);this.generator=function*(){for(var t,r,s=yield{high:n,low:o};;){var{high:n,low:o}=s;l.push(n),l.push(o),r=i.nextValue(s),l.totalPushed>=2*e.period&&null!=r&&(t={exitLong:l.periodHigh-r*e.multiplier,exitShort:l.periodLow+r*e.multiplier}),s=yield t}}(),this.generator.next(),t.forEach(((e,t)=>{var r={high:e,low:s[t],close:n[t]},i=this.generator.next(r);null!=i.value&&this.result.push(i.value)}))}nextValue(e){var t=this.generator.next(e);if(null!=t.value)return t.value}}function cr(e){h.reverseInputs(e);var t=new hr(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}hr.calculate=cr;class vr extends h{constructor(e){super(e),this.lineA=e.lineA,this.lineB=e.lineB;var t=[],r=[];this.generator=function*(){for(var e=yield,s=!1;;){t.unshift(e.valueA),r.unshift(e.valueB),s=e.valueA>e.valueB;for(var n=1;!0===s&&t[n]>=r[n];)t[n]>r[n]?s=!1:t[n]<r[n]?s=!0:t[n]===r[n]&&(n+=1);!0===s&&(t=[e.valueA],r=[e.valueB]),e=yield s}}(),this.generator.next(),this.result=[],this.lineA.forEach(((e,t)=>{var r=this.generator.next({valueA:this.lineA[t],valueB:this.lineB[t]});void 0!==r.value&&this.result.push(r.value)}))}static reverseInputs(e){e.reversedInput&&(e.lineA&&e.lineA.reverse(),e.lineB&&e.lineB.reverse())}nextValue(e,t){return this.generator.next({valueA:e,valueB:t}).value}}function pr(e){h.reverseInputs(e);var t=new vr(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}vr.calculate=pr;class dr extends h{constructor(e){super(e),this.lineA=e.lineA,this.lineB=e.lineB;var t=[],r=[];this.generator=function*(){for(var e=yield,s=!1;;){t.unshift(e.valueA),r.unshift(e.valueB),s=e.valueA<e.valueB;for(var n=1;!0===s&&t[n]<=r[n];)t[n]<r[n]?s=!1:t[n]>r[n]?s=!0:t[n]===r[n]&&(n+=1);!0===s&&(t=[e.valueA],r=[e.valueB]),e=yield s}}(),this.generator.next(),this.result=[],this.lineA.forEach(((e,t)=>{var r=this.generator.next({valueA:this.lineA[t],valueB:this.lineB[t]});void 0!==r.value&&this.result.push(r.value)}))}static reverseInputs(e){e.reversedInput&&(e.lineA&&e.lineA.reverse(),e.lineB&&e.lineB.reverse())}nextValue(e,t){return this.generator.next({valueA:e,valueB:t}).value}}function gr(e){h.reverseInputs(e);var t=new dr(e).result;return e.reversedInput&&t.reverse(),h.reverseInputs(e),t}function wr(){let e=[];return e.push("sma"),e.push("ema"),e.push("wma"),e.push("wema"),e.push("macd"),e.push("rsi"),e.push("bollingerbands"),e.push("adx"),e.push("atr"),e.push("truerange"),e.push("roc"),e.push("kst"),e.push("psar"),e.push("stochastic"),e.push("williamsr"),e.push("adl"),e.push("obv"),e.push("trix"),e.push("cci"),e.push("awesomeoscillator"),e.push("forceindex"),e.push("vwap"),e.push("volumeprofile"),e.push("renko"),e.push("heikinashi"),e.push("stochasticrsi"),e.push("mfi"),e.push("averagegain"),e.push("averageloss"),e.push("highest"),e.push("lowest"),e.push("sum"),e.push("FixedSizeLinkedList"),e.push("sd"),e.push("bullish"),e.push("bearish"),e.push("abandonedbaby"),e.push("doji"),e.push("bearishengulfingpattern"),e.push("bullishengulfingpattern"),e.push("darkcloudcover"),e.push("downsidetasukigap"),e.push("dragonflydoji"),e.push("gravestonedoji"),e.push("bullishharami"),e.push("bearishharami"),e.push("bullishharamicross"),e.push("bearishharamicross"),e.push("eveningdojistar"),e.push("eveningstar"),e.push("morningdojistar"),e.push("morningstar"),e.push("bullishmarubozu"),e.push("bearishmarubozu"),e.push("piercingline"),e.push("bullishspinningtop"),e.push("bearishspinningtop"),e.push("threeblackcrows"),e.push("threewhitesoldiers"),e.push("bullishhammerstick"),e.push("bearishhammerstick"),e.push("bullishinvertedhammerstick"),e.push("bearishinvertedhammerstick"),e.push("hammerpattern"),e.push("hammerpatternunconfirmed"),e.push("hangingman"),e.push("hangingmanunconfirmed"),e.push("shootingstar"),e.push("shootingstarunconfirmed"),e.push("tweezertop"),e.push("tweezerbottom"),e.push("predictPattern"),e.push("hasDoubleBottom"),e.push("hasDoubleTop"),e.push("hasHeadAndShoulder"),e.push("hasInverseHeadAndShoulder"),e.push("isTrendingUp"),e.push("isTrendingDown"),e.push("ichimokucloud"),e.push("keltnerchannels"),e.push("chandelierexit"),e.push("crossup"),e.push("crossdown"),e.push("crossover"),e}dr.calculate=gr;let fr=wr();export{Y as ADL,L as ADX,N as ATR,fr as AvailableIndicators,_ as AverageGain,q as AverageLoss,oe as AwesomeOscillator,B as BollingerBands,ie as CCI,s as CandleData,n as CandleList,hr as ChandelierExit,ur as ChandelierExitInput,ar as ChandelierExitOutput,dr as CrossDown,vr as CrossUp,p as EMA,r as FixedSizeLinkedList,se as ForceIndex,Ce as HeikinAshi,xe as Highest,rr as IchimokuCloud,O as KST,lr as KeltnerChannels,nr as KeltnerChannelsInput,ir as KeltnerChannelsOutput,Ie as Lowest,y as MACD,de as MFI,$ as OBV,G as PSAR,R as ROC,E as RSI,S as SD,c as SMA,J as Stochastic,we as StochasticRSI,Pe as Sum,te as TRIX,z as TrueRange,ae as VWAP,ce as VolumeProfile,f as WEMA,g as WMA,m as WilderSmoothing,Q as WilliamsR,Ft as abandonedbaby,Z as adl,D as adx,F as atr,V as averagegain,C as averageloss,ue as awesomeoscillator,Dt as bearish,pt as bearishengulfingpattern,er as bearishfractal,et as bearishhammerstick,gt as bearishharami,ft as bearishharamicross,rt as bearishinvertedhammerstick,_t as bearishmarubozu,Xt as bearishspinningtop,H as bollingerbands,ct as bullish,He as bullishengulfingpattern,Zt as bullishfractal,Xe as bullishhammerstick,ke as bullishharami,Te as bullishharamicross,Ze as bullishinvertedhammerstick,Ue as bullishmarubozu,Kt as bullishspinningtop,le as cci,cr as chandelierexit,gr as crossDown,pr as crossUp,jt as darkcloudcover,De as doji,je as downsidetasukigap,Ut as dragonflydoji,d as ema,mt as eveningdojistar,yt as eveningstar,tr as fibonacciretracement,ne as forceindex,wr as getAvailableIndicators,o as getConfig,Wt as gravestonedoji,nt as hammerpattern,lt as hammerpatternunconfirmed,Et as hangingman,St as hangingmanunconfirmed,Ee as heikinashi,me as highest,sr as ichimokucloud,or as keltnerchannels,U as kst,ye as lowest,P as macd,ge as mfi,Fe as morningdojistar,Me as morningstar,ee as obv,We as piercingline,W as psar,qe as renko,j as roc,b as rsi,M as sd,l as setConfig,Bt as shootingstar,At as shootingstarunconfirmed,v as sma,K as stochastic,fe as stochasticrsi,_e as sum,qt as threeblackcrows,Ke as threewhitesoldiers,re as trix,T as truerange,ut as tweezerbottom,zt as tweezertop,ve as volumeprofile,he as vwap,x as wema,I as wildersmoothing,X as williamsr,w as wma};
