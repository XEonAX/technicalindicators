(function(e){'use strict';function r(e){return te[e]}function l(e){let l=r('precision');return l?parseFloat(e.toPrecision(l)):e}function t(e){ne.reverseInputs(e);var r=new ae(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function o(e){ne.reverseInputs(e);var r=new se(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function n(e){ne.reverseInputs(e);var r=new ue(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function a(e){ne.reverseInputs(e);var r=new ie(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function s(e){ne.reverseInputs(e);var r=new he(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function u(e){ne.reverseInputs(e);var r=new pe(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function i(e){ne.reverseInputs(e);var r=new ge(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function h(e){ne.reverseInputs(e);var r=new ce(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function p(e){ne.reverseInputs(e);var r=new ve(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function g(e){ne.reverseInputs(e);var r=new de(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function c(e){ne.reverseInputs(e);var r=new fe(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function v(e){ne.reverseInputs(e);var r=new _e(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function d(e){ne.reverseInputs(e);var r=new Pe(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function m(e){ne.reverseInputs(e);var r=new be(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function x(e){ne.reverseInputs(e);var r=new Ce(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function w(e){ne.reverseInputs(e);var r=new Ee(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function f(e){ne.reverseInputs(e);var r=new qe(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function I(e){ne.reverseInputs(e);var r=new Se(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function _(e){ne.reverseInputs(e);var r=new Ve(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function P(e){ne.reverseInputs(e);var r=new Ae(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function b(e){ne.reverseInputs(e);var r=new ke(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function C(e){ne.reverseInputs(e);var r=new Be(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function E(e){ne.reverseInputs(e);var r=new He(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function q(e){ne.reverseInputs(e);var r=new ze(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function S(e){ne.reverseInputs(e);var r=new Le(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function V(e,r,l,t){return e<=l&&r>=l||l<=e&&t>=e}function A(e){ne.reverseInputs(e);var r=new De(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function k(e){ne.reverseInputs(e);var r=new Me(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function B(e){ne.reverseInputs(e);var r=new Re(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function H(e){ne.reverseInputs(e);var r=new je(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function z(e){ne.reverseInputs(e);var r=new Oe(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function L(e){ne.reverseInputs(e);var r=new ye(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function D(e){ne.reverseInputs(e);var r=new Fe(e).result;return e.reversedInput&&(r.open.reverse(),r.high.reverse(),r.low.reverse(),r.close.reverse(),r.volume.reverse(),r.timestamp.reverse()),ne.reverseInputs(e),r}function T(e){ne.reverseInputs(e);var r=new Ue(e).result;return e.reversedInput&&(r.open.reverse(),r.high.reverse(),r.low.reverse(),r.close.reverse(),r.volume.reverse(),r.timestamp.reverse()),ne.reverseInputs(e),r}function M(e){return new Ke().hasPattern(e)}function R(e){return new Ge().hasPattern(e)}function j(e){return new Ne().hasPattern(e)}function O(e){return new tr().hasPattern(e)}function y(e){return new or().hasPattern(e)}function F(e){return new nr().hasPattern(e)}function U(e){return new ar().hasPattern(e)}function W(e){ne.reverseInputs(e);var r=new kr(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function K(e){ne.reverseInputs(e);var r=new Br(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function G(e){ne.reverseInputs(e);var r=new Hr(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function N(e){ne.reverseInputs(e);var r=new zr(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function X(e){ne.reverseInputs(e);var r=new Lr(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}function J(){return['sma','ema','wma','wema','macd','rsi','bollingerbands','adx','atr','truerange','roc','kst','psar','stochastic','williamsr','adl','obv','trix','cci','awesomeoscillator','forceindex','vwap','volumeprofile','renko','heikinashi','stochasticrsi','mfi','averagegain','averageloss','highest','lowest','sum','FixedSizeLinkedList','sd','bullish','bearish','abandonedbaby','doji','bearishengulfingpattern','bullishengulfingpattern','darkcloudcover','downsidetasukigap','dragonflydoji','gravestonedoji','bullishharami','bearishharami','bullishharamicross','bearishharamicross','eveningdojistar','eveningstar','morningdojistar','morningstar','bullishmarubozu','bearishmarubozu','piercingline','bullishspinningtop','bearishspinningtop','threeblackcrows','threewhitesoldiers','bullishhammerstick','bearishhammerstick','bullishinvertedhammerstick','bearishinvertedhammerstick','hammerpattern','hammerpatternunconfirmed','hangingman','hangingmanunconfirmed','shootingstar','shootingstarunconfirmed','tweezertop','tweezerbottom','ichimokucloud','keltnerchannels','chandelierexit','crossup','crossdown','crossover']}var Q=Math.min,Y=Math.max,Z=Math.abs;class ${constructor(e,r,l){this.next=l,l&&(l.prev=this),this.prev=r,r&&(r.next=this),this.data=e}}class ee{constructor(){this._length=0}get head(){return this._head&&this._head.data}get tail(){return this._tail&&this._tail.data}get current(){return this._current&&this._current.data}get length(){return this._length}push(e){this._tail=new $(e,this._tail),0===this._length&&(this._head=this._tail,this._current=this._head,this._next=this._head),this._length++}pop(){var e=this._tail;if(0!==this._length)return(this._length--,0===this._length)?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._tail=e.prev,this._tail.next=void 0,this._current===e&&(this._current=this._tail,this._next=void 0),e.data)}shift(){var e=this._head;if(0!==this._length)return(this._length--,0===this._length)?(this._head=this._tail=this._current=this._next=void 0,e.data):(this._head=this._head.next,this._current===e&&(this._current=this._head,this._next=this._current.next),e.data)}unshift(e){this._head=new $(e,void 0,this._head),0===this._length&&(this._tail=this._head,this._next=this._head),this._length++}unshiftCurrent(){var e=this._current;return e===this._head||2>this._length?e&&e.data:(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.next=this._head,e.prev=void 0,this._head.prev=e,this._head=e,e.data)}removeCurrent(){var e=this._current;if(0!==this._length)return(this._length--,0===this._length)?(this._head=this._tail=this._current=this._next=void 0,e.data):(e===this._tail?(this._tail=e.prev,this._tail.next=void 0,this._current=this._tail):e===this._head?(this._head=e.next,this._head.prev=void 0,this._current=this._head):(e.next.prev=e.prev,e.prev.next=e.next,this._current=e.prev),this._next=this._current.next,e.data)}resetCursor(){return this._current=this._next=this._head,this}next(){var e=this._next;if(void 0!==e)return this._next=e.next,this._current=e,e.data}}class re extends ee{constructor(e,r,l,t){if(super(),this.size=e,this.maintainHigh=r,this.maintainLow=l,this.maintainSum=t,this.totalPushed=0,this.periodHigh=0,this.periodLow=Infinity,this.periodSum=0,!e||'number'!=typeof e)throw'Size required and should be a number.';this._push=this.push,this.push=function(e){this.add(e),this.totalPushed++}}add(e){this.length===this.size?(this.lastShift=this.shift(),this._push(e),this.maintainHigh&&this.lastShift==this.periodHigh&&this.calculatePeriodHigh(),this.maintainLow&&this.lastShift==this.periodLow&&this.calculatePeriodLow(),this.maintainSum&&(this.periodSum-=this.lastShift)):this._push(e),this.maintainHigh&&this.periodHigh<=e&&(this.periodHigh=e),this.maintainLow&&this.periodLow>=e&&(this.periodLow=e),this.maintainSum&&(this.periodSum+=e)}*iterator(){for(this.resetCursor();this.next();)yield this.current}calculatePeriodHigh(){for(this.resetCursor(),this.next()&&(this.periodHigh=this.current);this.next();)this.periodHigh<=this.current&&(this.periodHigh=this.current)}calculatePeriodLow(){for(this.resetCursor(),this.next()&&(this.periodLow=this.current);this.next();)this.periodLow>=this.current&&(this.periodLow=this.current)}}class le{constructor(){this.open=[],this.high=[],this.low=[],this.close=[],this.volume=[],this.timestamp=[]}}let te={};class oe{}class ne{constructor(e){this.format=e.format||l}static reverseInputs(e){e.reversedInput&&(e.values?e.values.reverse():void 0,e.open?e.open.reverse():void 0,e.high?e.high.reverse():void 0,e.low?e.low.reverse():void 0,e.close?e.close.reverse():void 0,e.volume?e.volume.reverse():void 0,e.timestamp?e.timestamp.reverse():void 0)}getResult(){return this.result}}class ae extends ne{constructor(e){super(e),this.period=e.period,this.price=e.values;this.generator=function*(e){var r,l=new ee,t=0,o=1,n=yield;for(l.push(0);;)o<e?(o++,l.push(n),t+=n):(t=t-l.shift()+n,r=t/e,l.push(n)),n=yield r}(this.period),this.generator.next(),this.result=[],this.price.forEach((e)=>{var r=this.generator.next(e);r.value!==void 0&&this.result.push(this.format(r.value))})}nextValue(e){var r=this.generator.next(e).value;if(r!=void 0)return this.format(r)}}ae.calculate=t;class se extends ne{constructor(e){super(e);var r,l=e.period,t=e.values;this.result=[],r=new ae({period:l,values:[]});this.generator=function*(){for(var e,t=yield;;)void 0!=e&&void 0!==t?(e=(t-e)*(2/(l+1))+e,t=yield e):(t=yield,e=r.nextValue(t),e&&(t=yield e))}(),this.generator.next(),this.generator.next(),t.forEach((e)=>{var r=this.generator.next(e);r.value!=void 0&&this.result.push(this.format(r.value))})}nextValue(e){var r=this.generator.next(e).value;if(r!=void 0)return this.format(r)}}se.calculate=o;class ue extends ne{constructor(e){super(e);var r=e.period,l=e.values;this.result=[],this.generator=function*(){for(let l=new ee;;)if(l.length<r)l.push((yield));else{l.resetCursor();let t=0;for(let e=1;e<=r;e++)t+=l.next()*e/(r*(r+1)/2);var e=yield t;l.shift(),l.push(e)}}(),this.generator.next(),l.forEach((e)=>{var r=this.generator.next(e);r.value!=void 0&&this.result.push(this.format(r.value))})}nextValue(e){var r=this.generator.next(e).value;if(r!=void 0)return this.format(r)}}ue.calculate=n;class ie extends ne{constructor(e){super(e);var r,l=e.period,t=e.values;this.result=[],r=new ae({period:l,values:[]});this.generator=function*(){for(var e,t=yield;;)void 0!=e&&void 0!==t?(e=(t-e)*(1/l)+e,t=yield e):(t=yield,e=r.nextValue(t),void 0!==e&&(t=yield e))}(),this.generator.next(),this.generator.next(),t.forEach((e)=>{var r=this.generator.next(e);r.value!=void 0&&this.result.push(this.format(r.value))})}nextValue(e){var r=this.generator.next(e).value;if(r!=void 0)return this.format(r)}}ie.calculate=a;class he extends ne{constructor(e){super(e);var r=e.SimpleMAOscillator?ae:se,l=e.SimpleMASignal?ae:se,t=new r({period:e.fastPeriod,values:[],format:(e)=>e}),o=new r({period:e.slowPeriod,values:[],format:(e)=>e}),n=new l({period:e.signalPeriod,values:[],format:(e)=>e}),a=this.format;this.result=[],this.generator=function*(){for(var r,l,s,u,i,h,p=0;;){if(p<e.slowPeriod){r=yield,i=t.nextValue(r),h=o.nextValue(r),p++;continue}i&&h&&(l=i-h,s=n.nextValue(l)),u=l-s,r=yield{MACD:a(l),signal:s?a(s):void 0,histogram:isNaN(u)?void 0:a(u)},i=t.nextValue(r),h=o.nextValue(r)}}(),this.generator.next(),e.values.forEach((e)=>{var r=this.generator.next(e);r.value!=void 0&&this.result.push(r.value)})}nextValue(e){var r=this.generator.next(e).value;return r}}he.calculate=s;class pe extends ne{constructor(e){super(e);let r=e.values,l=e.period,t=this.format;this.generator=function*(e){var r,l,o=yield,n=1,a=0,s=o;for(o=yield;;)l=o-s,l=0<l?l:0,0<l&&(a+=l),n<e?n++:void 0==r?r=a/e:r=(r*(e-1)+l)/e,s=o,r=void 0===r?void 0:t(r),o=yield r}(l),this.generator.next(),this.result=[],r.forEach((e)=>{var r=this.generator.next(e);r.value!==void 0&&this.result.push(r.value)})}nextValue(e){return this.generator.next(e).value}}pe.calculate=u;class ge extends ne{constructor(e){super(e);let r=e.values,l=e.period,t=this.format;this.generator=function*(e){var r,l,o=yield,n=1,a=0,s=o;for(o=yield;;)l=s-o,l=0<l?l:0,0<l&&(a+=l),n<e?n++:void 0==r?r=a/e:r=(r*(e-1)+l)/e,s=o,r=void 0===r?void 0:t(r),o=yield r}(l),this.generator.next(),this.result=[],r.forEach((e)=>{var r=this.generator.next(e);r.value!==void 0&&this.result.push(r.value)})}nextValue(e){return this.generator.next(e).value}}ge.calculate=i;class ce extends ne{constructor(e){super(e);var r=e.period,l=e.values,t=new pe({period:r,values:[]}),o=new ge({period:r,values:[]});let n=1;this.generator=function*(){for(var e,r,l,a,s=yield;;)e=t.nextValue(s),r=o.nextValue(s),void 0!==e&&void 0!==r&&(0===r?a=100:0===e?a=0:(l=e/r,l=isNaN(l)?0:l,a=parseFloat((100-100/(1+l)).toFixed(2)))),n++,s=yield a}(r),this.generator.next(),this.result=[],l.forEach((e)=>{var r=this.generator.next(e);r.value!==void 0&&this.result.push(r.value)})}nextValue(e){return this.generator.next(e).value}}ce.calculate=h;class ve extends ne{constructor(e){super(e);var r=e.period,l=e.values,t=new ae({period:r,values:[],format:(e)=>e});this.result=[],this.generator=function*(){var e,l,o=new re(r);e=yield;for(var n;;){if(o.push(e),l=t.nextValue(e),l){let e=0;for(let r of o.iterator())e+=Math.pow(r-l,2);n=Math.sqrt(e/r)}e=yield n}}(),this.generator.next(),l.forEach((e)=>{var r=this.generator.next(e);r.value!=void 0&&this.result.push(this.format(r.value))})}nextValue(e){var r=this.generator.next(e);if(r.value!=void 0)return this.format(r.value)}}ve.calculate=p;class de extends ne{constructor(e){super(e);var r,l,t=e.period,o=e.values,n=e.stdDev,a=this.format;this.result=[],r=new ae({period:t,values:[],format:(e)=>e}),l=new ve({period:t,values:[],format:(e)=>e}),this.generator=function*(){var e,t,o,s;for(t=yield;;){if(o=r.nextValue(t),s=l.nextValue(t),o){let r=a(o),l=a(o+s*n),u=a(o-s*n),i=a((t-u)/(l-u));e={middle:r,upper:l,lower:u,pb:i}}t=yield e}}(),this.generator.next(),o.forEach((e)=>{var r=this.generator.next(e);r.value!=void 0&&this.result.push(r.value)})}nextValue(e){return this.generator.next(e).value}}de.calculate=g;class me extends ne{constructor(e){super(e),this.period=e.period,this.price=e.values;this.generator=function*(e){for(var r=new ee,l=0,t=1,o=yield,n=0;;)t<e?(t++,l+=o,n=void 0):t==e?(t++,l+=o,n=l):n=n-n/e+o,o=yield n}(this.period),this.generator.next(),this.result=[],this.price.forEach((e)=>{var r=this.generator.next(e);r.value!=void 0&&this.result.push(this.format(r.value))})}nextValue(e){var r=this.generator.next(e).value;if(r!=void 0)return this.format(r)}}me.calculate=function(e){ne.reverseInputs(e);var r=new me(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r};class xe extends ne{constructor(e){super(e);var r=e.low,l=e.high,t=this.format;if(r.length!=l.length)throw'Inputs(low,high) not of equal size';this.result=[],this.generator=function*(){for(var e,r,l=yield;;){if(r){let o=l.high-r.high,n=r.low-l.low;e=t(n>o&&0<n?n:0)}r=l,l=yield e}}(),this.generator.next(),r.forEach((e,t)=>{var o=this.generator.next({high:l[t],low:r[t]});o.value!==void 0&&this.result.push(o.value)})}static calculate(e){ne.reverseInputs(e);var r=new xe(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}nextValue(e){return this.generator.next(e).value}}class we extends ne{constructor(e){super(e);var r=e.low,l=e.high,t=this.format;if(r.length!=l.length)throw'Inputs(low,high) not of equal size';this.result=[],this.generator=function*(){for(var e,r,l=yield;;){if(r){let o=l.high-r.high,n=r.low-l.low;e=t(o>n&&0<o?o:0)}r=l,l=yield e}}(),this.generator.next(),r.forEach((e,t)=>{var o=this.generator.next({high:l[t],low:r[t]});o.value!==void 0&&this.result.push(o.value)})}static calculate(e){ne.reverseInputs(e);var r=new we(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r}nextValue(e){return this.generator.next(e).value}}class fe extends ne{constructor(e){super(e);var r=e.low,l=e.high,t=e.close,o=this.format;if(r.length!=l.length)throw'Inputs(low,high) not of equal size';this.result=[],this.generator=function*(){for(var e,r,l=yield;;)void 0==e&&(e=l.close,l=yield r),r=Y(l.high-l.low,isNaN(Z(l.high-e))?0:Z(l.high-e),isNaN(Z(l.low-e))?0:Z(l.low-e)),e=l.close,void 0!=r&&(r=o(r)),l=yield r}(),this.generator.next(),r.forEach((e,o)=>{var n=this.generator.next({high:l[o],low:r[o],close:t[o]});n.value!=void 0&&this.result.push(n.value)})}nextValue(e){return this.generator.next(e).value}}fe.calculate=c;class Ie extends oe{}class _e extends ne{constructor(e){super(e);var r=e.low,l=e.high,t=e.close,o=e.period,n=this.format,a=new we({high:[],low:[]}),s=new xe({high:[],low:[]}),u=new me({period:o,values:[],format:(e)=>e}),i=new me({period:o,values:[],format:(e)=>e}),h=new me({period:o,values:[],format:(e)=>e}),p=new ie({period:o,values:[],format:(e)=>e}),g=new fe({low:[],high:[],close:[]});if(r.length!==l.length||l.length!==t.length)throw'Inputs(low,high, close) not of equal size';this.result=[],Ie,this.generator=function*(){var e,r,l,t,o,n,c,v=yield;for(e=0,r=0,l=0;;){let e=g.nextValue(v),r=a.nextValue(v),l=s.nextValue(v);if(e===void 0){v=yield;continue}let d=h.nextValue(e),m=u.nextValue(r),x=i.nextValue(l);if(d!=void 0&&m!=void 0&&x!=void 0){t=100*m/d,o=100*x/d;let e=Z(t-o),r=t+o;n=100*(e/r),c=p.nextValue(n)}v=yield{adx:c,pdi:t,mdi:o}}}(),this.generator.next(),r.forEach((e,o)=>{var a=this.generator.next({high:l[o],low:r[o],close:t[o]});a.value!=void 0&&a.value.adx!=void 0&&this.result.push({adx:n(a.value.adx),pdi:n(a.value.pdi),mdi:n(a.value.mdi)})})}nextValue(e){let r=this.generator.next(e).value;if(r!=void 0&&r.adx!=void 0)return{adx:this.format(r.adx),pdi:this.format(r.pdi),mdi:this.format(r.mdi)}}}_e.calculate=v;class Pe extends ne{constructor(e){super(e);var r=e.low,l=e.high,t=e.close,o=e.period,n=this.format;if(r.length!==l.length||l.length!==t.length)throw'Inputs(low,high, close) not of equal size';var a=new fe({low:[],high:[],close:[]}),s=new ie({period:o,values:[],format:(e)=>e});this.result=[],this.generator=function*(){for(var e,r,l=yield;;)r=a.nextValue({low:l.low,high:l.high,close:l.close}),e=void 0===r?void 0:s.nextValue(r),l=yield e}(),this.generator.next(),r.forEach((e,o)=>{var a=this.generator.next({high:l[o],low:r[o],close:t[o]});a.value!==void 0&&this.result.push(n(a.value))})}nextValue(e){return this.generator.next(e).value}}Pe.calculate=d;class be extends ne{constructor(e){super(e);var r=e.period,l=e.values;this.result=[],this.generator=function*(){let e=1;for(var l,t=new re(r),o=yield;;)t.push(o),e<r?e++:l=100*((o-t.lastShift)/t.lastShift),o=yield l}(),this.generator.next(),l.forEach((e)=>{var r=this.generator.next(e);r.value==void 0||isNaN(r.value)||this.result.push(this.format(r.value))})}nextValue(e){var r=this.generator.next(e);if(r.value!=void 0&&!isNaN(r.value))return this.format(r.value)}}be.calculate=m;class Ce extends ne{constructor(e){super(e);let r=e.values,l=e.ROCPer1,t=e.ROCPer2,o=e.ROCPer3,n=e.ROCPer4,a=e.SMAROCPer1,s=e.SMAROCPer2,u=e.SMAROCPer3,i=e.SMAROCPer4,h=e.signalPeriod,p=new be({period:l,values:[]}),g=new be({period:t,values:[]}),c=new be({period:o,values:[]}),v=new be({period:n,values:[]}),d=new ae({period:a,values:[],format:(e)=>e}),m=new ae({period:s,values:[],format:(e)=>e}),x=new ae({period:u,values:[],format:(e)=>e}),w=new ae({period:i,values:[],format:(e)=>e}),f=new ae({period:h,values:[],format:(e)=>e});var I=this.format;this.result=[];let _=Y(l+a,t+s,o+u,n+i);this.generator=function*(){for(let e,r,l,t,o,n,a,s=1,u=yield;;){let i=p.nextValue(u),h=g.nextValue(u),P=c.nextValue(u),b=v.nextValue(u);r=i===void 0?void 0:d.nextValue(i),l=h===void 0?void 0:m.nextValue(h),t=P===void 0?void 0:x.nextValue(P),o=b===void 0?void 0:w.nextValue(b),s<_?s++:e=1*r+2*l+3*t+4*o,n=e===void 0?void 0:f.nextValue(e),a=e===void 0?void 0:{kst:I(e),signal:n?I(n):void 0},u=yield a}}(),this.generator.next(),r.forEach((e)=>{let r=this.generator.next(e);r.value!=void 0&&this.result.push(r.value)})}nextValue(e){let r=this.generator.next(e);if(r.value!=void 0)return r.value}}Ce.calculate=x;class Ee extends ne{constructor(e){super(e);let r=e.high||[],l=e.low||[];this.result=[],this.generator=function*(e,r){for(let l,t,o,n,a=!0,s=e,u=yield;;)l?(o+=s*(t-o),a?(o=Q(o,n.low,u.low),l.high>t&&(t=l.high,s=Q(s+e,r))):(o=Y(o,n.high,u.high),l.low<t&&(t=l.low,s=Q(s+e,r))),(a&&l.low<o||!a&&l.high>o)&&(s=e,o=t,a=!a,t=a?l.high:l.low)):(o=u.low,t=u.high),n=u,l&&(u=l),l=yield o}(e.step,e.max),this.generator.next(),l.forEach((e,t)=>{var o=this.generator.next({high:r[t],low:l[t]});o.value!==void 0&&this.result.push(o.value)})}nextValue(e){let r=this.generator.next(e);if(r.value!==void 0)return r.value}}Ee.calculate=w;class qe extends ne{constructor(e){super(e);let r=e.low,l=e.high,t=e.close,o=e.period,n=e.signalPeriod,a=this.format;if(r.length!==l.length||l.length!==t.length)throw'Inputs(low,high, close) not of equal size';this.result=[],this.generator=function*(){let e,r,l=1,t=new re(o,!0,!1),s=new re(o,!1,!0),u=new ae({period:n,values:[],format:(e)=>e});for(var i=yield;;){if(t.push(i.high),s.push(i.low),l<o){l++,i=yield;continue}let n=s.periodLow;e=100*((i.close-n)/(t.periodHigh-n)),e=isNaN(e)?0:e,r=u.nextValue(e),i=yield{k:a(e),d:void 0===r?void 0:a(r)}}}(),this.generator.next(),r.forEach((e,o)=>{var n=this.generator.next({high:l[o],low:r[o],close:t[o]});n.value!==void 0&&this.result.push(n.value)})}nextValue(e){let r=this.generator.next(e);if(r.value!==void 0)return r.value}}qe.calculate=f;class Se extends ne{constructor(e){super(e);let r=e.low,l=e.high,t=e.close,o=e.period,n=this.format;if(r.length!==l.length||l.length!==t.length)throw'Inputs(low,high, close) not of equal size';this.result=[],this.generator=function*(){let e,r,l=1,t=new re(o,!0,!1),a=new re(o,!1,!0);var s=yield;for(let u;;){if(t.push(s.high),a.push(s.low),l<o){l++,s=yield;continue}e=a.periodLow,r=t.periodHigh,u=n(-100*((r-s.close)/(r-e))),s=yield u}}(),this.generator.next(),r.forEach((e,o)=>{var n=this.generator.next({high:l[o],low:r[o],close:t[o]});n.value!==void 0&&this.result.push(n.value)})}nextValue(e){var r=this.generator.next(e);if(r.value!=void 0)return this.format(r.value)}}Se.calculate=I;class Ve extends ne{constructor(e){super(e);var r=e.high,l=e.low,t=e.close,o=e.volume;if(l.length!==r.length||r.length!==t.length||r.length!==o.length)throw'Inputs(low,high, close, volumes) not of equal size';this.result=[],this.generator=function*(){var e,r=0;for(e=yield;;){let l=(e.close-e.low-(e.high-e.close))/(e.high-e.low);l=isNaN(l)?1:l;let t=l*e.volume;r+=t,e=yield Math.round(r)}}(),this.generator.next(),r.forEach((e,r)=>{var n={high:e,low:l[r],close:t[r],volume:o[r]},a=this.generator.next(n);a.value!=void 0&&this.result.push(a.value)})}nextValue(e){return this.generator.next(e).value}}Ve.calculate=_;class Ae extends ne{constructor(e){super(e);var r=e.close,l=e.volume;this.result=[],this.generator=function*(){var e,r,l=0;for(e=yield,e.close&&'number'==typeof e.close&&(r=e.close,e=yield);;)r<e.close?l+=e.volume:e.close<r&&(l-=e.volume),r=e.close,e=yield l}(),this.generator.next(),r.forEach((e,t)=>{let o={close:r[t],volume:l[t]},n=this.generator.next(o);n.value!=void 0&&this.result.push(n.value)})}nextValue(e){return this.generator.next(e).value}}Ae.calculate=P;class ke extends ne{constructor(e){super(e);let r=e.values,l=e.period,t=this.format,o=new se({period:l,values:[],format:(e)=>e}),n=new se({period:l,values:[],format:(e)=>e}),a=new se({period:l,values:[],format:(e)=>e}),s=new be({period:1,values:[],format:(e)=>e});this.result=[],this.generator=function*(){for(let e=yield;;){let r=o.nextValue(e),l=r?n.nextValue(r):void 0,u=l?a.nextValue(l):void 0,i=u?s.nextValue(u):void 0;e=yield i?t(i):void 0}}(),this.generator.next(),r.forEach((e)=>{let r=this.generator.next(e);r.value!==void 0&&this.result.push(r.value)})}nextValue(e){let r=this.generator.next(e);if(r.value!==void 0)return r.value}}ke.calculate=b;class Be extends ne{constructor(e){super(e);var r=e.close,l=e.volume,t=e.period||1;if(l.length!==r.length)throw'Inputs(volume, close) not of equal size';let o=new se({values:[],period:t});this.result=[],this.generator=function*(){var e=yield,r=yield;for(let l;;)l=(r.close-e.close)*r.volume,e=r,r=yield o.nextValue(l)}(),this.generator.next(),l.forEach((e,t)=>{var o=this.generator.next({close:r[t],volume:l[t]});o.value!=void 0&&this.result.push(o.value)})}nextValue(e){let r=this.generator.next(e).value;if(r!=void 0)return r}}Be.calculate=C;class He extends ne{constructor(e){super(e);var r=e.low,l=e.high,t=e.close,o=e.period,n=this.format;var a=new re(o),s=new ae({period:o,values:[],format:(e)=>e});if(r.length!==l.length||l.length!==t.length)throw'Inputs(low,high, close) not of equal size';this.result=[],this.generator=function*(){for(var e=yield;;){let r=(e.high+e.low+e.close)/3;a.push(r);let l,t=s.nextValue(r),n=null,u=0;if(t!=void 0){for(let e of a.iterator())u+=Z(e-t);n=u/o,l=(r-t)/(.015*n)}e=yield l}}(),this.generator.next(),r.forEach((e,o)=>{var n=this.generator.next({high:l[o],low:r[o],close:t[o]});n.value!=void 0&&this.result.push(n.value)})}nextValue(e){let r=this.generator.next(e).value;if(r!=void 0)return r}}He.calculate=E;class ze extends ne{constructor(e){super(e);var r=e.high,l=e.low,t=e.fastPeriod,o=e.slowPeriod,n=new ae({values:[],period:o}),a=new ae({values:[],period:t});this.result=[],this.generator=function*(){var e,r,l,t,o;for(r=yield;;)l=(r.high+r.low)/2,t=n.nextValue(l),o=a.nextValue(l),void 0!==t&&void 0!==o&&(e=o-t),r=yield e}(),this.generator.next(),r.forEach((e,r)=>{var t={high:e,low:l[r]},o=this.generator.next(t);o.value!=void 0&&this.result.push(this.format(o.value))})}nextValue(e){var r=this.generator.next(e);if(r.value!=void 0)return this.format(r.value)}}ze.calculate=q;class Le extends ne{constructor(e){super(e);var r=e.low,l=e.high,t=e.close,o=e.volume,n=this.format;if(r.length!==l.length||l.length!==t.length)throw'Inputs(low,high, close) not of equal size';this.result=[],this.generator=function*(){var e=yield;for(let r=0,l=0;;){let t=(e.high+e.low+e.close)/3,o=e.volume*t;r+=o,l+=e.volume,e=yield r/l}}(),this.generator.next(),r.forEach((e,n)=>{var a=this.generator.next({high:l[n],low:r[n],close:t[n],volume:o[n]});a.value!=void 0&&this.result.push(a.value)})}nextValue(e){let r=this.generator.next(e).value;if(r!=void 0)return r}}Le.calculate=S;class De extends ne{constructor(e){super(e);var r=e.high,l=e.low,t=e.close,o=e.open,n=e.volume,a=e.noOfBars;if(l.length!==r.length||r.length!==t.length||r.length!==n.length)throw'Inputs(low,high, close, volumes) not of equal size';this.result=[];var s=Y(...r,...l,...t,...o),u=Q(...r,...l,...t,...o),i=u;for(let h=0;h<a;h++){let e=i,h=e+(s-u)/a;i=h;let p=0,g=0,c=0;for(let a=0;a<r.length;a++){let s=l[a],u=r[a],i=o[a],v=t[a],d=n[a];V(e,h,s,u)&&(c+=d,i>v?g+=d:p+=d)}this.result.push({rangeStart:e,rangeEnd:h,bullishVolume:p,bearishVolume:g,totalVolume:c})}}nextValue(){throw'Next value not supported for volume profile'}}De.calculate=A;class Te extends ne{constructor(e){super(e),this.result=[],this.generator=function*(){for(let e=yield;;)e=yield(e.high+e.low+e.close)/3}(),this.generator.next(),e.low.forEach((r,l)=>{var t=this.generator.next({high:e.high[l],low:e.low[l],close:e.close[l]});this.result.push(t.value)})}nextValue(e){var r=this.generator.next(e).value;return r}}Te.calculate=function(e){ne.reverseInputs(e);var r=new Te(e).result;return e.reversedInput&&r.reverse(),ne.reverseInputs(e),r};class Me extends ne{constructor(e){super(e);var r=e.high,l=e.low,t=e.close,o=e.volume,n=e.period,a=new Te({low:[],high:[],close:[]}),s=new re(n,!1,!1,!0),u=new re(n,!1,!1,!0);if(l.length!==r.length||r.length!==t.length||r.length!==o.length)throw'Inputs(low,high, close, volumes) not of equal size';this.result=[],this.generator=function*(){var e,r,l,t,o,i,h=0;let p=null,g=null;for(r=yield,l=r.close,r=yield;;){var{high:c,low:v,close:d,volume:m}=r,x=0,w=0;p=a.nextValue({high:c,low:v,close:d}),h=p*m,null!=p&&null!=g&&(p>g?x=h:w=h,s.push(x),u.push(w),t=s.periodSum,i=u.periodSum,s.totalPushed>=n&&s.totalPushed>=n&&(o=t/i,e=100-100/(1+o))),g=p,r=yield e}}(),this.generator.next(),r.forEach((e,r)=>{var n={high:e,low:l[r],close:t[r],volume:o[r]},a=this.generator.next(n);a.value!=void 0&&this.result.push(parseFloat(a.value.toFixed(2)))})}nextValue(e){var r=this.generator.next(e);if(r.value!=void 0)return parseFloat(r.value.toFixed(2))}}Me.calculate=k;class Re extends ne{constructor(e){super(e);let r=e.values,l=e.rsiPeriod,t=e.stochasticPeriod,o=e.kPeriod,n=e.dPeriod,a=this.format;this.result=[],this.generator=function*(){let e,r,a,s,u=new ce({period:l,values:[]}),i=new qe({period:t,high:[],low:[],close:[],signalPeriod:o}),h=new ae({period:n,values:[],format:(e)=>e});for(var p=yield;;){if(e=u.nextValue(p),void 0!==e){var g={high:e,low:e,close:e};r=i.nextValue(g),void 0!==r&&void 0!==r.d&&(a=h.nextValue(r.d),void 0!==a&&(s={stochRSI:r.k,k:r.d,d:a}))}p=yield s}}(),this.generator.next(),r.forEach((e)=>{var r=this.generator.next(e);r.value!==void 0&&this.result.push(r.value)})}nextValue(e){let r=this.generator.next(e);if(r.value!==void 0)return r.value}}Re.calculate=B;class je extends ne{constructor(e){super(e);var r=e.values,l=e.period;this.result=[];var t=new re(l,!0,!1,!1);this.generator=function*(){var e,r;for(e=yield;;)t.push(e),t.totalPushed>=l&&(r=t.periodHigh),e=yield r}(),this.generator.next(),r.forEach((e)=>{var r=this.generator.next(e);r.value!=void 0&&this.result.push(r.value)})}nextValue(e){var r=this.generator.next(e);if(r.value!=void 0)return r.value}}je.calculate=H;class Oe extends ne{constructor(e){super(e);var r=e.values,l=e.period;this.result=[];var t=new re(l,!1,!0,!1);this.generator=function*(){var e,r;for(e=yield;;)t.push(e),t.totalPushed>=l&&(r=t.periodLow),e=yield r}(),this.generator.next(),r.forEach((e)=>{var r=this.generator.next(e);r.value!=void 0&&this.result.push(r.value)})}nextValue(e){var r=this.generator.next(e);if(r.value!=void 0)return r.value}}Oe.calculate=z;class ye extends ne{constructor(e){super(e);var r=e.values,l=e.period;this.result=[];var t=new re(l,!1,!1,!0);this.generator=function*(){var e,r;for(e=yield;;)t.push(e),t.totalPushed>=l&&(r=t.periodSum),e=yield r}(),this.generator.next(),r.forEach((e)=>{var r=this.generator.next(e);r.value!=void 0&&this.result.push(r.value)})}nextValue(e){var r=this.generator.next(e);if(r.value!=void 0)return r.value}}ye.calculate=L;class Fe extends ne{constructor(e){super(e);this.format;let r=e.useATR,l=e.brickSize||0;if(r){let r=d(Object.assign({},e));l=r[r.length-1]}if(this.result=new le,0===l)return void console.error('Not enough data to calculate brickSize for renko when using ATR');let t=0,o=0,n=Infinity,a=0,s=0,u=0;this.generator=function*(){for(let e=yield;;){if(0==t){t=e.close,o=e.high,n=e.low,a=e.close,s=e.volume,u=e.timestamp,e=yield;continue}let r=Z(e.close-a),i=Z(e.close-t);if(r>=l&&i>=l){let u=r>i?t:a,h={open:u,high:o>e.high?o:e.high,low:n<e.Low?n:e.low,close:u>e.close?u-l:u+l,volume:s+e.volume,timestamp:e.timestamp};t=h.open,o=h.close,n=h.close,a=h.close,s=0,e=yield h}else o=o>e.high?o:e.high,n=n<e.Low?n:e.low,s+=e.volume,u=e.timestamp,e=yield}}(),this.generator.next(),e.low.forEach((r,l)=>{var t=this.generator.next({open:e.open[l],high:e.high[l],low:e.low[l],close:e.close[l],volume:e.volume[l],timestamp:e.timestamp[l]});t.value&&(this.result.open.push(t.value.open),this.result.high.push(t.value.high),this.result.low.push(t.value.low),this.result.close.push(t.value.close),this.result.volume.push(t.value.volume),this.result.timestamp.push(t.value.timestamp))})}nextValue(){return console.error('Cannot calculate next value on Renko, Every value has to be recomputed for every change, use calcualte method'),null}}Fe.calculate=D;class Ue extends ne{constructor(e){super(e);this.format;this.result=new le;let r=null,l=0,t=Infinity,o=0,n=0,a=0;this.generator=function*(){for(let e=yield,s=null;;){if(null==r)r=(e.close+e.open)/2,l=e.high,t=e.low,o=(e.close+e.open+e.high+e.low)/4,n=e.volume||0,a=e.timestamp||0,s={open:r,high:l,low:t,close:o,volume:e.volume||0,timestamp:e.timestamp||0};else{let n=(e.close+e.open+e.high+e.low)/4,a=(r+o)/2,u=Y(a,n,e.high),i=Q(e.low,a,n);s={close:n,open:a,high:u,low:i,volume:e.volume||0,timestamp:e.timestamp||0},o=n,r=a,l=u,t=i}e=yield s}}(),this.generator.next(),e.low.forEach((r,l)=>{var t=this.generator.next({open:e.open[l],high:e.high[l],low:e.low[l],close:e.close[l],volume:e.volume?e.volume[l]:e.volume,timestamp:e.timestamp?e.timestamp[l]:e.timestamp});t.value&&(this.result.open.push(t.value.open),this.result.high.push(t.value.high),this.result.low.push(t.value.low),this.result.close.push(t.value.close),this.result.volume.push(t.value.volume),this.result.timestamp.push(t.value.timestamp))})}nextValue(e){var r=this.generator.next(e).value;return r}}Ue.calculate=T;class We{constructor(){}approximateEqual(e,r){let l=1*parseFloat(Z(e-r).toPrecision(4)),t=1*parseFloat((1e-3*e).toPrecision(4));return l<=t}logic(){throw'this has to be implemented'}getAllPatternIndex(e){if(e.close.length<this.requiredCount)return console.warn('Data count less than data required for the strategy ',this.name),[];e.reversedInput&&(e.open.reverse(),e.high.reverse(),e.low.reverse(),e.close.reverse());let r=this.logic;return this._generateDataForCandleStick(e).map((e,l)=>r.call(this,e)?l:void 0).filter((e)=>e)}hasPattern(e){if(e.close.length<this.requiredCount)return console.warn('Data count less than data required for the strategy ',this.name),!1;e.reversedInput&&(e.open.reverse(),e.high.reverse(),e.low.reverse(),e.close.reverse());let r=this.logic;return r.call(this,this._getLastDataForCandleStick(e))}_getLastDataForCandleStick(e){let r=this.requiredCount;if(e.close.length===r||!r)return e;else{let l={open:[],high:[],low:[],close:[]},t=0,o=e.close.length-r;for(;t<r;)l.open.push(e.open[o+t]),l.high.push(e.high[o+t]),l.low.push(e.low[o+t]),l.close.push(e.close[o+t]),t++;return l}}_generateDataForCandleStick(e){let r=this.requiredCount,l=e.close.map(function(l,t){let o=0,n={open:[],high:[],low:[],close:[]};for(;o<r;)n.open.push(e.open[t+o]),n.high.push(e.high[t+o]),n.low.push(e.low[t+o]),n.close.push(e.close[t+o]),o++;return n}).filter((l,t)=>t<=e.close.length-r);return l}}class Ke extends We{constructor(){super(),this.name='BearishSpinningTop',this.requiredCount=1}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=Z(l-r),a=Z(t-r),s=Z(t-o);return n<a&&n<s&&r>l}}class Ge extends We{constructor(){super(),this.name='BullishSpinningTop',this.requiredCount=1}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=Z(l-r),a=Z(t-l),s=Z(r-o);return n<a&&n<s&&l>r}}class Ne extends We{constructor(){super(),this.name='Doji',this.requiredCount=1}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=this.approximateEqual(r,l),a=n&&this.approximateEqual(r,t),s=n&&this.approximateEqual(l,o);return n&&a==s}}class Xe extends We{constructor(){super(),this.name='MorningStar',this.requiredCount=3}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=e.open[1],a=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2],c=Z(r-l)>=3*Z(n-a);return l<r&&this.includesDoji(e)&&c&&r>s&&i<h&&h>(r+l)/2}includesDoji(e){let r={open:[e.open[1]],close:[e.close[1]],low:[e.low[1]],high:[e.high[1]]},l=M(r);return l=l||R(r),l=l||j(r),l}}class Je extends We{constructor(){super(),this.name='BullishEngulfingPattern',this.requiredCount=2}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=e.open[1],a=e.close[1],s=e.high[1],u=e.low[1];return l<r&&r>n&&r<a&&t<s&&o>u}}class Qe extends We{constructor(){super(),this.requiredCount=2,this.name='BullishHarami'}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=e.open[1],a=e.close[1],s=e.high[1],u=e.low[1];return r>n&&l<n&&l<a&&r>u&&t>s}}class Ye extends We{constructor(){super(),this.requiredCount=2,this.name='BullishHaramiCross'}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=e.open[1],a=e.close[1],s=e.high[1],u=e.low[1],i=this.approximateEqual(n,a);return r>n&&l<n&&l<a&&r>u&&t>s&&i}}class Ze extends We{constructor(){super(),this.name='MorningDojiStar',this.requiredCount=3}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=e.open[1],a=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2],c=new Ne().hasPattern({open:[n],close:[a],high:[s],low:[u]});return l<r&&c&&i<h&&s<o&&u<o&&i>s&&a<i&&h>(r+l)/2}}class $e extends We{constructor(){super(),this.requiredCount=3,this.name='DownsideTasukiGap'}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=e.open[1],a=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2];return l<r&&a<n&&h>i&&s<o&&n>i&&a<i&&h>n&&h<l}}class er extends We{constructor(){super(),this.name='BullishMarubozu',this.requiredCount=1}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=l==t&&this.approximateEqual(o,r)&&r<l&&r<t;return n}}class rr extends We{constructor(){super(),this.requiredCount=2,this.name='PiercingLine'}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=e.open[1],a=e.close[1],s=e.high[1],u=e.low[1];return u<o&&l<r&&o>n&&a>(r+l)/2&&a>n}}class lr extends We{constructor(){super(),this.name='ThreeWhiteSoldiers',this.requiredCount=3}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=e.open[1],a=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2];return s>t&&p>s&&r<l&&n<a&&i<h&&l>n&&n<t&&s>i&&i<a}}class tr extends We{constructor(){super(),this.name='BullishHammerStick',this.requiredCount=1}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=l>r;return n=n&&this.approximateEqual(l,t),n=n&&2*(l-r)<=r-o,n}}class or extends We{constructor(){super(),this.name='BullishInvertedHammerStick',this.requiredCount=1}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=l>r;return n=n&&this.approximateEqual(r,o),n=n&&2*(l-r)<=t-l,n}}class nr extends We{constructor(){super(),this.name='BearishHammerStick',this.requiredCount=1}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=r>l;return n=n&&this.approximateEqual(r,t),n=n&&2*(r-l)<=l-o,n}}class ar extends We{constructor(){super(),this.name='BearishInvertedHammerStick',this.requiredCount=1}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=r>l;return n=n&&this.approximateEqual(l,o),n=n&&2*(r-l)<=t-r,n}}class sr extends We{constructor(){super(),this.name='HammerPattern'}logic(e){let r=this.downwardTrend(e);return r=r&&this.includesHammer(e),r=r&&this.hasConfirmation(e),r}downwardTrend(e,r=!0){let l=r?e.close.length-2:e.close.length-1,t=u({values:e.close.slice(0,l),period:l-1}),o=i({values:e.close.slice(0,l),period:l-1});return o>t}includesHammer(e,r=!0){let l=r?e.close.length-2:e.close.length-1,t=r?e.close.length-1:void 0,o={open:e.open.slice(l,t),close:e.close.slice(l,t),low:e.low.slice(l,t),high:e.high.slice(l,t)},n=F(o);return n=n||U(o),n=n||O(o),n=n||y(o),n}hasConfirmation(e){let r={open:e.open[e.close.length-2],close:e.close[e.close.length-2],low:e.low[e.close.length-2],high:e.high[e.close.length-2]},l={open:e.open[e.close.length-1],close:e.close[e.close.length-1],low:e.low[e.close.length-1],high:e.high[e.close.length-1]},t=l.open<l.close;return t&&r.close<l.close}}class ur extends sr{constructor(){super(),this.name='HammerPatternUnconfirmed'}logic(e){let r=this.downwardTrend(e,!1);return r=r&&this.includesHammer(e,!1),r}}class ir extends We{constructor(){super(),this.name='TweezerBottom'}logic(e){let r=e.open[e.close.length-2],l=e.close[e.close.length-2],t=e.high[e.close.length-2],o=e.low[e.close.length-2],n=e.open[e.close.length-1],a=e.close[e.close.length-1],s=e.high[e.close.length-1],u=e.low[e.close.length-1];return this.downwardTrend(e)&&this.approximateEqual(o,u)&&r>a&&l>u&&r>l&&n<a}downwardTrend(e){let r=u({values:e.close.slice(0,e.close.length-2),period:e.close.length-3}),l=i({values:e.close.slice(0,e.close.length-2),period:e.close.length-3});return l>r}}let hr=[new Je,new $e,new Qe,new Ye,new Ze,new Xe,new er,new rr,new lr,new tr,new or,new sr,new ur,new ir];class pr extends We{constructor(){super(),this.name='Bullish Candlesticks'}hasPattern(e){return hr.reduce(function(r,l){let t=l.hasPattern(e);return r||t},!1)}}class gr extends We{constructor(){super(),this.name='BearishEngulfingPattern',this.requiredCount=2}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=e.open[1],a=e.close[1],s=e.high[1],u=e.low[1];return l>r&&r<n&&r>a&&o>u&&t<s}}class cr extends We{constructor(){super(),this.requiredCount=2,this.name='BearishHarami'}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=e.open[1],a=e.close[1],s=e.high[1],u=e.low[1];return r<n&&l>n&&l>a&&r<u&&t>s}}class vr extends We{constructor(){super(),this.requiredCount=2,this.name='BearishHaramiCross'}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=e.open[1],a=e.close[1],s=e.high[1],u=e.low[1],i=this.approximateEqual(n,a);return r<n&&l>n&&l>a&&r<u&&t>s&&i}}class dr extends We{constructor(){super(),this.name='EveningDojiStar',this.requiredCount=3}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=e.open[1],a=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2],c=new Ne().hasPattern({open:[n],close:[a],high:[s],low:[u]});return l>r&&c&&s>t&&u>t&&i<u&&a>i&&i>h&&h<(r+l)/2}}class mr extends We{constructor(){super(),this.name='EveningStar',this.requiredCount=3}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=e.open[1],a=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2],c=Z(r-l)>=3*Z(n-a);return l>r&&this.includesDoji(e)&&r<u&&c&&i>h&&h<(r+l)/2}includesDoji(e){let r={open:[e.open[1]],close:[e.close[1]],low:[e.low[1]],high:[e.high[1]]},l=M(r);return l=l||R(r),l=l||j(r),l}}class xr extends We{constructor(){super(),this.name='BearishMarubozu',this.requiredCount=1}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=this.approximateEqual(r,t)&&o==l&&r>l&&r>o;return n}}class wr extends We{constructor(){super(),this.name='ThreeBlackCrows',this.requiredCount=3}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=e.open[1],a=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2];return o>u&&u>g&&r>l&&n>a&&i>h&&r>n&&n>l&&n>i&&i>a}}class fr extends We{constructor(){super(),this.name='HangingMan'}logic(e){let r=this.upwardTrend(e);return r=r&&this.includesHammer(e),r=r&&this.hasConfirmation(e),r}upwardTrend(e,r=!0){let l=r?e.close.length-2:e.close.length-1,t=u({values:e.close.slice(0,l),period:l-1}),o=i({values:e.close.slice(0,l),period:l-1});return t>o}includesHammer(e,r=!0){let l=r?e.close.length-2:e.close.length-1,t=r?e.close.length-1:void 0,o={open:e.open.slice(l,t),close:e.close.slice(l,t),low:e.low.slice(l,t),high:e.high.slice(l,t)},n=F(o);return n=n||O(o),n}hasConfirmation(e){let r={open:e.open[e.close.length-2],close:e.close[e.close.length-2],low:e.low[e.close.length-2],high:e.high[e.close.length-2]},l={open:e.open[e.close.length-1],close:e.close[e.close.length-1],low:e.low[e.close.length-1],high:e.high[e.close.length-1]},t=l.open>l.close;return t&&r.close>l.close}}class Ir extends fr{constructor(){super(),this.name='HangingManUnconfirmed'}logic(e){let r=this.upwardTrend(e,!1);return r=r&&this.includesHammer(e,!1),r}}class _r extends We{constructor(){super(),this.name='ShootingStar'}logic(e){let r=this.upwardTrend(e);return r=r&&this.includesHammer(e),r=r&&this.hasConfirmation(e),r}upwardTrend(e,r=!0){let l=r?e.close.length-2:e.close.length-1,t=u({values:e.close.slice(0,l),period:l-1}),o=i({values:e.close.slice(0,l),period:l-1});return t>o}includesHammer(e,r=!0){let l=r?e.close.length-2:e.close.length-1,t=r?e.close.length-1:void 0,o={open:e.open.slice(l,t),close:e.close.slice(l,t),low:e.low.slice(l,t),high:e.high.slice(l,t)},n=U(o);return n=n||y(o),n}hasConfirmation(e){let r={open:e.open[e.close.length-2],close:e.close[e.close.length-2],low:e.low[e.close.length-2],high:e.high[e.close.length-2]},l={open:e.open[e.close.length-1],close:e.close[e.close.length-1],low:e.low[e.close.length-1],high:e.high[e.close.length-1]},t=l.open>l.close;return t&&r.close>l.close}}class Pr extends _r{constructor(){super(),this.name='ShootingStarUnconfirmed'}logic(e){let r=this.upwardTrend(e,!1);return r=r&&this.includesHammer(e,!1),r}}class br extends We{constructor(){super(),this.name='TweezerTop'}logic(e){let r=e.open[e.close.length-2],l=e.close[e.close.length-2],t=e.high[e.close.length-2],o=e.low[e.close.length-2],n=e.open[e.close.length-1],a=e.close[e.close.length-1],s=e.high[e.close.length-1],u=e.low[e.close.length-1];return this.upwardTrend(e)&&this.approximateEqual(t,s)&&r<a&&l<s&&r<l&&n>a}upwardTrend(e){let r=u({values:e.close.slice(0,e.close.length-2),period:e.close.length-3}),l=i({values:e.close.slice(0,e.close.length-2),period:e.close.length-3});return r>l}}let Cr=[new gr,new cr,new vr,new dr,new mr,new xr,new wr,new nr,new ar,new fr,new Ir,new _r,new Pr,new br];class Er extends We{constructor(){super(),this.name='Bearish Candlesticks'}hasPattern(e){return Cr.reduce(function(r,l){return r||l.hasPattern(e)},!1)}}class qr extends We{constructor(){super(),this.name='AbandonedBaby',this.requiredCount=3}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=e.open[1],a=e.close[1],s=e.high[1],u=e.low[1],i=e.open[2],h=e.close[2],p=e.high[2],g=e.low[2],c=new Ne().hasPattern({open:[n],close:[a],high:[s],low:[u]});return l<r&&c&&s<o&&g>s&&h>i&&p<r}}class Sr extends We{constructor(){super(),this.name='DarkCloudCover',this.requiredCount=2}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=e.open[1],a=e.close[1],s=e.high[1],u=e.low[1];return l>r&&a<n&&n>t&&a<(l+r)/2&&a>r}}class Vr extends We{constructor(){super(),this.requiredCount=1,this.name='DragonFlyDoji'}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=this.approximateEqual(r,l),a=n&&this.approximateEqual(r,t),s=n&&this.approximateEqual(l,o);return n&&a&&!s}}class Ar extends We{constructor(){super(),this.requiredCount=1,this.name='GraveStoneDoji'}logic(e){let r=e.open[0],l=e.close[0],t=e.high[0],o=e.low[0],n=this.approximateEqual(r,l),a=n&&this.approximateEqual(r,t),s=n&&this.approximateEqual(l,o);return n&&s&&!a}}class kr extends ne{constructor(e){super(e),this.result=[];var r=Object.assign({},{conversionPeriod:9,basePeriod:26,spanPeriod:52,displacement:26},e),l=new re(2*r.conversionPeriod,!0,!0,!1),t=new re(2*r.basePeriod,!0,!0,!1),o=new re(2*r.spanPeriod,!0,!0,!1);this.generator=function*(){let e,n,a=Y(r.conversionPeriod,r.basePeriod,r.spanPeriod,r.displacement),s=1;for(n=yield;;){if(l.push(n.high),l.push(n.low),t.push(n.high),t.push(n.low),o.push(n.high),o.push(n.low),s<a)s++;else{let r=(l.periodHigh+l.periodLow)/2,n=(t.periodHigh+t.periodLow)/2,a=(o.periodHigh+o.periodLow)/2;e={conversion:r,base:n,spanA:(r+n)/2,spanB:a}}n=yield e}}(),this.generator.next(),e.low.forEach((r,l)=>{var t=this.generator.next({high:e.high[l],low:e.low[l]});t.value&&this.result.push(t.value)})}nextValue(e){return this.generator.next(e).value}}kr.calculate=W;class Br extends ne{constructor(e){super(e);var r,l=e.useSMA?ae:se,t=new l({period:e.maPeriod,values:[],format:(e)=>e}),o=new Pe({period:e.atrPeriod,high:[],low:[],close:[],format:(e)=>e});this.result=[],this.generator=function*(){var l;for(r=yield;;){var{close:n}=r,a=t.nextValue(n),s=o.nextValue(r);a!=void 0&&s!=void 0&&(l={middle:a,upper:a+e.multiplier*s,lower:a-e.multiplier*s}),r=yield l}}(),this.generator.next();var n=e.high;n.forEach((r,l)=>{var t={high:r,low:e.low[l],close:e.close[l]},o=this.generator.next(t);o.value!=void 0&&this.result.push(o.value)})}nextValue(e){var r=this.generator.next(e);if(r.value!=void 0)return r.value}}Br.calculate=K;class Hr extends ne{constructor(e){super(e);var r=e.high,l=e.low,t=e.close;this.result=[];var o=new Pe({period:e.period,high:[],low:[],close:[],format:(e)=>e}),n=new re(2*e.period,!0,!0,!1);this.generator=function*(){for(var r,l,t=yield;;){var{high:a,low:s}=t;n.push(a),n.push(s),l=o.nextValue(t),n.totalPushed>=2*e.period&&l!=void 0&&(r={exitLong:n.periodHigh-l*e.multiplier,exitShort:n.periodLow+l*e.multiplier}),t=yield r}}(),this.generator.next(),r.forEach((e,r)=>{var o={high:e,low:l[r],close:t[r]},n=this.generator.next(o);n.value!=void 0&&this.result.push(n.value)})}nextValue(e){var r=this.generator.next(e);if(r.value!=void 0)return r.value}}Hr.calculate=G;class zr extends ne{constructor(e){super(e),this.lineA=e.lineA,this.lineB=e.lineB;var r=[],l=[];this.generator=function*(){for(var e=yield,t=!1;;){r.unshift(e.valueA),l.unshift(e.valueB),t=e.valueA>e.valueB;for(var o=1;!0==t&&r[o]>=l[o];)r[o]>l[o]?t=!1:r[o]<l[o]?t=!0:r[o]===l[o]&&(o+=1);!0==t&&(r=[e.valueA],l=[e.valueB]),e=yield t}}(),this.generator.next(),this.result=[],this.lineA.forEach((e,r)=>{var l=this.generator.next({valueA:this.lineA[r],valueB:this.lineB[r]});l.value!==void 0&&this.result.push(l.value)})}static reverseInputs(e){e.reversedInput&&(e.lineA?e.lineA.reverse():void 0,e.lineB?e.lineB.reverse():void 0)}nextValue(e,r){return this.generator.next({valueA:e,valueB:r}).value}}zr.calculate=N;class Lr extends ne{constructor(e){super(e),this.lineA=e.lineA,this.lineB=e.lineB;var r=[],l=[];this.generator=function*(){for(var e=yield,t=!1;;){r.unshift(e.valueA),l.unshift(e.valueB),t=e.valueA<e.valueB;for(var o=1;!0==t&&r[o]<=l[o];)r[o]<l[o]?t=!1:r[o]>l[o]?t=!0:r[o]===l[o]&&(o+=1);!0==t&&(r=[e.valueA],l=[e.valueB]),e=yield t}}(),this.generator.next(),this.result=[],this.lineA.forEach((e,r)=>{var l=this.generator.next({valueA:this.lineA[r],valueB:this.lineB[r]});l.value!==void 0&&this.result.push(l.value)})}static reverseInputs(e){e.reversedInput&&(e.lineA?e.lineA.reverse():void 0,e.lineB?e.lineB.reverse():void 0)}nextValue(e,r){return this.generator.next({valueA:e,valueB:r}).value}}Lr.calculate=X;let Dr=J();e.getAvailableIndicators=J,e.AvailableIndicators=Dr,e.FixedSizeLinkedList=re,e.CandleData=class{},e.CandleList=le,e.sma=t,e.SMA=ae,e.ema=o,e.EMA=se,e.wma=n,e.WMA=ue,e.wema=a,e.WEMA=ie,e.macd=s,e.MACD=he,e.rsi=h,e.RSI=ce,e.bollingerbands=g,e.BollingerBands=de,e.adx=v,e.ADX=_e,e.atr=d,e.ATR=Pe,e.truerange=c,e.TrueRange=fe,e.roc=m,e.ROC=be,e.kst=x,e.KST=Ce,e.psar=w,e.PSAR=Ee,e.stochastic=f,e.Stochastic=qe,e.williamsr=I,e.WilliamsR=Se,e.adl=_,e.ADL=Ve,e.obv=P,e.OBV=Ae,e.trix=b,e.TRIX=ke,e.forceindex=C,e.ForceIndex=Be,e.cci=E,e.CCI=He,e.awesomeoscillator=q,e.AwesomeOscillator=ze,e.vwap=S,e.VWAP=Le,e.volumeprofile=A,e.VolumeProfile=De,e.mfi=k,e.MFI=Me,e.stochasticrsi=B,e.StochasticRSI=Re,e.averagegain=u,e.AverageGain=pe,e.averageloss=i,e.AverageLoss=ge,e.sd=p,e.SD=ve,e.highest=H,e.Highest=je,e.lowest=z,e.Lowest=Oe,e.sum=L,e.Sum=ye,e.renko=D,e.HeikinAshi=Ue,e.heikinashi=T,e.bullish=function(e){return new pr().hasPattern(e)},e.bearish=function(e){return new Er().hasPattern(e)},e.abandonedbaby=function(e){return new qr().hasPattern(e)},e.doji=j,e.bearishengulfingpattern=function(e){return new gr().hasPattern(e)},e.bullishengulfingpattern=function(e){return new Je().hasPattern(e)},e.darkcloudcover=function(e){return new Sr().hasPattern(e)},e.downsidetasukigap=function(e){return new $e().hasPattern(e)},e.dragonflydoji=function(e){return new Vr().hasPattern(e)},e.gravestonedoji=function(e){return new Ar().hasPattern(e)},e.bullishharami=function(e){return new Qe().hasPattern(e)},e.bearishharami=function(e){return new cr().hasPattern(e)},e.bullishharamicross=function(e){return new Ye().hasPattern(e)},e.bearishharamicross=function(e){return new vr().hasPattern(e)},e.eveningdojistar=function(e){return new dr().hasPattern(e)},e.eveningstar=function(e){return new mr().hasPattern(e)},e.morningdojistar=function(e){return new Ze().hasPattern(e)},e.morningstar=function(e){return new Xe().hasPattern(e)},e.bullishmarubozu=function(e){return new er().hasPattern(e)},e.bearishmarubozu=function(e){return new xr().hasPattern(e)},e.piercingline=function(e){return new rr().hasPattern(e)},e.bullishspinningtop=R,e.bearishspinningtop=M,e.threeblackcrows=function(e){return new wr().hasPattern(e)},e.threewhitesoldiers=function(e){return new lr().hasPattern(e)},e.bullishhammerstick=O,e.bearishhammerstick=F,e.bullishinvertedhammerstick=y,e.bearishinvertedhammerstick=U,e.hammerpattern=function(e){return new sr().hasPattern(e)},e.hammerpatternunconfirmed=function(e){return new ur().hasPattern(e)},e.hangingman=function(e){return new fr().hasPattern(e)},e.hangingmanunconfirmed=function(e){return new Ir().hasPattern(e)},e.shootingstar=function(e){return new _r().hasPattern(e)},e.shootingstarunconfirmed=function(e){return new Pr().hasPattern(e)},e.tweezertop=function(e){return new br().hasPattern(e)},e.tweezerbottom=function(e){return new ir().hasPattern(e)},e.fibonacciretracement=function(e,r){let l,t=[0,23.6,38.2,50,61.8,78.6,100,127.2,161.8,261.8,423.6];return l=e<r?t.map(function(l){let t=r-Z(e-r)*l/100;return 0<t?t:0}):t.map(function(l){let t=r+Z(e-r)*l/100;return 0<t?t:0}),l},e.ichimokucloud=W,e.IchimokuCloud=kr,e.keltnerchannels=K,e.KeltnerChannels=Br,e.KeltnerChannelsInput=class extends oe{constructor(){super(...arguments),this.maPeriod=20,this.atrPeriod=10,this.useSMA=!1,this.multiplier=1}},e.KeltnerChannelsOutput=class extends oe{},e.chandelierexit=G,e.ChandelierExit=Hr,e.ChandelierExitInput=class extends oe{constructor(){super(...arguments),this.period=22,this.multiplier=3}},e.ChandelierExitOutput=class extends oe{},e.crossUp=N,e.CrossUp=zr,e.crossDown=X,e.CrossDown=Lr,e.setConfig=function(e,r){te[e]=r},e.getConfig=r})(this.window=this.window||{});
